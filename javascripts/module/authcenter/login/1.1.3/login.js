define("authcenter/login/1.1.3/js/login",["$","alipay/storex/1.0.1/storex","gallery/json/1.0.3/json","arale/base/1.1.1/base","arale/class/1.1.0/class","arale/events/1.1.0/events","gallery/store/1.3.7/store","./util/namespace","./util/getTime","./util/set-domain","./util/util","./util/rule","./util/crossIframe","./module/alieditAttr","./module/checkcode","./module/switchaliedit","arale/tip/1.1.3/tip","arale/popup/1.1.1/popup","arale/overlay/1.1.1/overlay","arale/position/1.0.1/position","arale/iframe-shim/1.0.2/iframe-shim","arale/widget/1.1.1/widget","./module/btnStyle","./module/validator","arale/validator/0.9.5/validator","arale/placeholder/1.1.0/placeholder","./module/account","./module/accountsave","./module/adjustheight","./module/autocomplete","arale/autocomplete/1.2.2/autocomplete","arale/templatable/0.9.1/templatable","gallery/handlebars/1.0.2/handlebars","gallery/handlebars/1.0.2/runtime","alipay/object-shim/1.0.0/object-shim","./module/proxyip","./module/ignoringSpaces","./module/refreshCheckCode","./util/uri","./module/realtimeCheckcode","./module/voiceCheckcode","./module/alilogin","./scene/alipay","./module/indexBg","./module/qrcode"],function(a){"use strict";var b=a("$"),c=a("alipay/storex/1.0.1/storex"),d=a("./util/namespace"),e=a("./util/getTime");a("./util/set-domain"),d("system.auth"),system.auth.errorcode={closechacha:"删除账号记录",accounterror:"账户名blur时候校验未通过"},a("./util/util"),system.auth.log=function(a,d){var f=c.status().enabled?c.get("debug"):"",g="",h="";location.host.indexOf("alipay.com")>1?-1!==b.inArray(a,["track","error"])&&Tracker&&Tracker.click("auth^"+a+"^"+d):"true"===f?-1!==b.inArray(a,["track","debug","info","warn","error"])&&(h=system.auth.errorcode[d],g=a.toUpperCase()+": "+("undefined"!=typeof h&&h?h:d)+" - "+e(),"undefined"!=typeof console&&console.log(g)):-1!==b.inArray(a,["track","warn","error"])&&(h=system.auth.errorcode[d],g=a.toUpperCase()+": "+("undefined"!=typeof h&&h?h:d)+" - "+e(),"undefined"!=typeof console&&console.log(g))},system.auth.param={J_superSwitch:b("#J-superSwitch"),account:b("#J-input-user"),J_isNoActiveX:b("#J-noActiveX"),J_alieditPwd:b("#password_container"),standarPwd:b("#password_input"),J_standarPwd:b(".standardPwdContainer"),authcode:b("#J-input-checkcode"),J_authcode:b("#J-checkcode"),safeSignCheck:b("#safeSignCheck"),J_safeSignCheck:b("#J-password"),alieditUsing:document.getElementsByName("J_aliedit_using")[0],password:b("#password"),loginBtn:b("#J-login-btn"),loginForm:b("#login")},system.auth.instance={},system.auth.instance.TTI={FOCUS:""},system.auth.instance.getTTI=function(a,b){if("undefined"!=typeof window._to){var c=b-window._to.start;for(var d in system.auth.instance.TTI)d===a&&(system.auth.instance.TTI[d]=c)}},a("./util/rule"),a("./util/crossIframe"),a("./module/alieditAttr"),a("./module/checkcode"),a("./module/switchaliedit"),a("./module/btnStyle"),a("./module/validator"),a("./module/account"),a("./module/accountsave"),a("./module/adjustheight"),a("./module/autocomplete"),a("./module/proxyip"),a("./module/ignoringSpaces"),a("./module/refreshCheckCode"),a("./module/realtimeCheckcode"),a("./module/voiceCheckcode"),a("./module/alilogin"),a("./scene/alipay"),a("./module/indexBg"),a("./module/qrcode"),b(document).ready(function(){setTimeout(function(){var a="";for(var b in system.auth.instance.TTI)a=system.auth.instance.TTI[b];"undefined"!=typeof Tracker&&Tracker.calc("TTI-autoFocus",a)},3e3)})}),define("authcenter/login/1.1.3/js/util/namespace",[],function(a,b,c){"use strict";function d(a,b){var c=a.split("."),d=b||window;c[0]in window||(window[c[0]]={});for(var e;c.length&&(e=c.shift());)d[e]||(d[e]={}),d[e]._parentModule||(d[e]._parentModule=d),d=d[e],d._moduleName=e;return d}c.exports=d}),define("authcenter/login/1.1.3/js/util/getTime",[],function(a,b,c){"use strict";function d(){var a=new Date;return[a.getFullYear(),a.getMonth()+1,a.getDate()].join("-")+" "+[a.getHours(),a.getMinutes(),a.getSeconds()].join(":")}c.exports=d}),define("authcenter/login/1.1.3/js/util/set-domain",[],function(){"use strict";var a=document.domain.split(".");if(a.length>1){var b=a[a.length-2]+"."+a[a.length-1];document.domain=b}}),define("authcenter/login/1.1.3/js/util/util",["$"],function(a){"use strict";a("$"),system.auth.util=system.auth.util||{},system.auth.util.trimAll=function(a){return a.toString().replace(/^\s+|\s+|\s+$/g,"")},system.auth.util.limitEmail=function(a){a=a.replace(/^\s*(.*?)\s*$/g,"$1");var b={regxp:/(^.*)(.{3}$)/g,placeholder:"$1***",leftLimit:6},c=a.split("@"),d=c[0],e=c[1];return c.length>1?(d.length>b.leftLimit&&(d=d.slice(0,b.leftLimit).replace(b.regxp,b.placeholder)),[d,"@",e].join("").toLowerCase()):a.toLowerCase()}}),define("authcenter/login/1.1.3/js/util/rule",[],function(){"use strict";system.auth.rule=system.auth.rule||{},system.auth.rule.emailOrMobile=function(a){var b=!1;return/^([a-zA-Z0-9_\.\-\+])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$/.test(a)?b=!0:/^([a-zA-Z0-9_\.\-\+])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+(\#[a-zA-Z0-9]{1,20})+$/.test(a)?b=!0:/^1\d{10}$/.test(a)?b=!0:/^(1\d{10})(\#[a-zA-Z0-9]{1,20})$/.test(a)?b=!0:/^(00)?(886|853|852|82|81|65|60)[0-9]{8}$/.test(a)?b=!0:/^(00)?(886|853|852|82|81|65|60)-?[0-9]{7,11}$/.test(a)&&(b=!0),b}}),define("authcenter/login/1.1.3/js/util/crossIframe",[],function(){"use strict";system.auth.crossIframe=function(){var a=null;!function(){var b=self.parent;if(b&&b.showLoginIframe)b.showLoginIframe(),a&&clearTimeout(a);else try{a=setTimeout(arguments.callee,500)}catch(c){}}()}}),define("authcenter/login/1.1.3/js/module/alieditAttr",["$"],function(a){"use strict";a("$"),system.auth.alieditInit=function(){if(this.alieditAttrs={},window.light&&light.page&&(light.page.products.password||light.page.products.password_input)){var a=light.page.products.password||light.page.products.password_input,b=window.alipay.security;this.alieditAttrs.alieditPwd=a.element,this.alieditAttrs.getPassword=function(){return a.getPassword()},this.alieditAttrs.getCi1=function(){return a.getCi1()},this.alieditAttrs.getCi2=function(){return a.getCi2()},this.alieditAttrs.installedAliedit=b.npedit.installed||b.edit.installed,this.alieditAttrs.detectAliedit=b.edit.detect}},light.ready(function(){system.auth.alieditInit()})}),define("authcenter/login/1.1.3/js/module/checkcode",["$"],function(a){"use strict";var b=a("$");system.auth.checkcode=function(a){var c=this;this.init();for(var d in a)this[d]=a[d];if(b("#J-checkcode-img").on("click",function(a){a.preventDefault(),system.auth.refreshCheckCode(),system.auth.param.authcode[0].focus()}),document.getElementsByName("logonIdReadOnly")[0]&&"true"===document.getElementsByName("logonIdReadOnly")[0].value&&this.failCallback.call(this),!this.form.length>0||!this.logonId.length>0||!this.errorBox.length>0)return this.failCallback.call(this),!1;if(this.logonIdFirstValue=this.logonId.val(),!json_ua)var e=0,f=setInterval(function(){json_ua?clearInterval(f):(e++,e>4&&(clearInterval(f),c.showCheckCode()))},100);this.supportAliedit()||this.showCheckCode(),this.bind()},system.auth.checkcode.prototype={form:null,logonId:null,logonIdFirstValue:null,errorBox:null,loginTitle:null,accountFormatError:["请输入账户名。","账户名的长度不能超过100位。","支付宝账户是邮箱地址或手机号码。"],accountSwtich:!0,accountInfoShow:!1,accountInfoNode:null,isAlertType:!1,accountsaverKey:null,codeCnt_:null,authcode:null,formSubmit_:null,formToken:null,isPerson:!1,timer:null,timeout:3e3,accountValue:null,accountResult:!1,qrAccountThumb:[],accountErrorCode:null,accountTips:window.ACCOUNTTIPS,ajaxTarget:null,needQrLogin:!0,init:function(){this.form=b("#login")[0],this.logonId=b("#J-input-user"),this.errorBox=b("#J-errorBox"),this.loginTitle=b("#J-login-title"),this.codeCnt_=b("#J-checkcode"),this.authcode=b("#J-input-checkcode"),this.formToken=b("#login input[name=rds_form_token]")},bind:function(){var a=this;this.submitAspect(),b(system.auth.param.loginForm).on("SWITCH_ALIEDITER_EVENT",function(c,d){if(d&&a.isPerson&&system.auth.alieditAttrs.supportAliedit)a.hideCheckCode();else if(!d){try{b(system.auth.param.loginForm).trigger("CLICK_SUBMIT_BUTTON_EVENT",!1)}catch(c){}a.onFailCallback&&a.onFailCallback.call(a,null),a.ajaxTarget=null}}),a.logonId&&a.logonId.attr("id")&&a.codeCnt_&&(!a.codeCnt_||a.codeCnt_.hasClass("fn-hide"))||a.failCallback.call(a),setTimeout(function(){try{system.auth.accountsaver.status()?("true"===b(system.auth.param.alieditUsing).val()?system.auth.alieditAttrs.alieditPwd&&system.auth.alieditAttrs.alieditPwd.focus():b(system.auth.param.standarPwd)[0].focus(),a.checkAccount(a.logonId.val())&&a.request()):b(a.logonId).focus()}catch(c){a.failCallback.call(a)}try{system.auth.instance.getTTI("FOCUS",new Date)}catch(c){}},300),b(a.logonId).on("blur",function(){a.checkAccount(a.logonId.val())?a.request():a.sendSeed("accounterror")})},checkAccount:function(a){var b=this;return a=a.replace(/^\s+|\s+$/g,""),a=a.replace(/[。．]/,"."),0===a.length?!1:a===b.logonId.attr("placeholder")?!1:a.length>100?(b.showErrorBox(b.accountFormatError[1]),!1):b.emailOrMobile(a)?!0:(b.showErrorBox(b.accountFormatError[2]),!1)},emailOrMobile:function(a){var b=!1;return/^([a-zA-Z0-9_\.\-\+])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+$/.test(a)?b=!0:/^([a-zA-Z0-9_\.\-\+])+\@(([a-zA-Z0-9\-])+\.)+([a-zA-Z0-9]{2,4})+(\#[a-zA-Z0-9]{1,20})+$/.test(a)?b=!0:/^1\d{10}$/.test(a)?b=!0:/^(1\d{10})(\#[a-zA-Z0-9]{1,20})$/.test(a)?b=!0:/^(00)?(886|853|852|82|81|65|60)[0-9]{8}$/.test(a)?b=!0:/^(00)?(886|853|852|82|81|65|60)-?[0-9]{7,11}$/.test(a)&&(b=!0),b},insertFormToken:function(){var a=this.formToken;a.length<1&&(a=document.createElement("input"),a.setAttribute("type","hidden"),a.name="rds_form_token",a.value=form_tk,this.form.appendChild(a))},supportAliedit:function(){return document.getElementsByName("J_aliedit_using")[0]&&"true"===document.getElementsByName("J_aliedit_using")[0].value},submitAspect:function(){var a=this.form.submit,c=this;this.form.submit=function(){c.insertFormToken(),c.onSubmit&&c.onSubmit.call(c),c.formSubmit_=a;var d=b(system.auth.param.loginForm).attr("data-qrcode");if(!c.accountSwtich||c.accountSwtich&&c.accountResult||"true"===d){try{system.auth.accountsaver.save(c.accountsaverKey)}catch(e){}try{b(system.auth.param.loginForm).trigger("CLICK_SUBMIT_BUTTON_EVENT",!0)}catch(e){}try{a()}catch(e){a.call(c.form)}}else if(c.accountErrorCode){c.showErrorBox(c.accountTips[c.accountErrorCode]);try{b(system.auth.param.loginForm).trigger("CLICK_SUBMIT_BUTTON_EVENT",!1)}catch(e){}}else if(null===c.accountValue){c.checkAccount(c.logonId.attr("value"))&&c.request();try{b(system.auth.param.loginForm).trigger("CLICK_SUBMIT_BUTTON_EVENT",!1)}catch(e){}}else{c.sendSeed("onSubmit-others");try{b(system.auth.param.loginForm).trigger("CLICK_SUBMIT_BUTTON_EVENT",!1)}catch(e){}}}},sendSeed:function(a){"undefined"!=typeof Tracker&&Tracker.click(a)},reset:function(){this.formSubmit_=null,this.accountValue=null,this.accountErrorCode=null,this.accountResult=!1},showCheckCode:function(){this.codeCnt_.removeClass("fn-hide");try{system.auth.adjustheight.inited&&system.auth.adjustheight()}catch(a){}var b=window.location.hostname.split(".")[0];this.sendSeed("authlogin-showCheckCode-"+b)},hideCheckCode:function(){this.codeCnt_.addClass("fn-hide"),this.authcode.val(""),b("#J-checkcodeIcon").length>0&&b("#J-checkcodeIcon").removeClass("sl-checkcode-err").removeClass("sl-checkcode-suc");try{system.auth.adjustheight.inited&&system.auth.adjustheight()}catch(a){}},request:function(){var a=this,c=a.errorBox.attr("errorType");if("0"===c&&a.logonId.val()!==a.logonIdFirstValue&&a.hideErrorBox(),"1"===c&&-1!==b.inArray(a.errorBox.find(".sl-error-text").html(),a.accountFormatError)&&(a.accountErrorCode?a.showErrorBox(a.accountTips[a.accountErrorCode]):a.hideErrorBox()),a.logonId.val()===a.accountValue){var d=b.inArray(this.accountValue,this.qrAccountThumb);return d>=0&&a.qrAccountLogin(),!1}"1"===c&&a.hideErrorBox(),a.reset(),a.accountValue=b.trim(a.logonId.val());var e={};e=a.accountInfoShow?{logonId:a.accountValue,_json_token:form_tk,json_ua:json_ua,sceneCode:"AC1",stamp:(new Date).getTime(),getUser:!0}:{logonId:a.accountValue,_json_token:form_tk,json_ua:json_ua,sceneCode:"AC1",stamp:(new Date).getTime()},b.ajax({type:"POST",url:"/login/verifyId.json",data:e,dataType:"json",timeout:a.timeout,success:function(b){a.successCallback.call(a,b)},error:function(){a.failCallback.call(a),a.accountResult=!0}})},successCallback:function(a){if("true"===a.isPerson)this.isPerson=!0;else{this.showCheckCode(),this.accountInfoShow&&this.clearAccountInfo();try{b(system.auth.param.loginForm).trigger("CLICK_SUBMIT_BUTTON_EVENT",!1)}catch(c){}this.onFailCallback&&this.onFailCallback.call(this,a)}if(this.accountSwtich&&(this.accountTips[a.checkResult]?(clearTimeout(this.timer),this.accountResult=!1,this.accountErrorCode=a.checkResult,this.accountInfoShow&&this.clearAccountInfo(),this.showErrorBox(this.accountTips[this.accountErrorCode])):(this.accountResult=!0,this.accountInfoShow&&a.enabledStatus&&("T"===a.enabledStatus?this.showAccountInfo(a):"Q"===a.enabledStatus&&(this.clearAccountInfo(),clearTimeout(this.timer),this.showErrorBox(this.accountTips.STATUS_NEED_ACTIVATE))))),this.needQrLogin&&"true"===a.isShowQRCode){var d=b.inArray(this.accountValue,this.qrAccountThumb);0>d&&this.qrAccountThumb.push(this.accountValue),this.qrAccountLogin()}if(this.formSubmit_&&this.isPerson&&(!this.accountSwtich||this.accountSwtich&&this.accountResult)){try{system.auth.accountsaver.save(this.accountsaverKey)}catch(c){}try{this.formSubmit_()}catch(c){this.formSubmit_.call(this.form)}}this.ajaxTarget=null},failCallback:function(){this.showCheckCode();try{b(system.auth.param.loginForm).trigger("CLICK_SUBMIT_BUTTON_EVENT",!1)}catch(a){}this.onFailCallback&&this.onFailCallback.call(this,null),this.ajaxTarget=null},showErrorBox:function(a){if(this.isAlertType)return!1;this.loginTitle.addClass("fn-hide"),this.errorBox.find(".sl-error-text")[0].innerHTML=a,this.errorBox.addClass("sl-error-display"),this.errorBox.attr("errorType","1");try{system.auth.adjustheight.inited&&system.auth.adjustheight()}catch(c){}this.needQrLogin&&(b(".J-forQRLogin").length>0&&b(".J-forQRLogin").addClass("sl-error-link"),this.errorBox.delegate(".J-forQRLogin","click",function(a){a.preventDefault(),system.auth.qrCode.show("false")})),this.onFailCallback&&this.onFailCallback.call(this,null)},hideErrorBox:function(){var a=this;clearTimeout(a.timer),a.timer=setTimeout(function(){a.errorBox.removeClass("sl-error-display"),a.errorBox.find(".sl-error-text").html(""),a.errorBox.attr("errorType",""),a.loginTitle.removeClass("fn-hide")},500);try{system.auth.adjustheight.inited&&system.auth.adjustheight()}catch(b){}},showAccountInfo:function(a){"undefined"!=typeof a.realName&&"undefined"!=typeof a.bindMobile&&(b("#J-getAccount").removeClass("fn-hide"),b("#J-getAccount-result").removeClass("fn-hide"),b("#J-showRealName").html(a.realName),b("#J-showMobile").html(a.bindMobile))},clearAccountInfo:function(){b("#J-getAccount").addClass("fn-hide"),b("#J-getAccount-result").addClass("fn-hide"),b("#J-showRealName").html(""),b("#J-showMobile").html("")},qrAccountLogin:function(){system.auth.qrCode.show("true"),system.auth.accountsaver.clear(),clearTimeout(this.timer),this.showErrorBox(this.accountTips.MOBILE_ACCOUNT_NEED_QRLOGON)}}}),define("authcenter/login/1.1.3/js/module/switchaliedit",["$","arale/tip/1.1.3/tip","arale/popup/1.1.1/popup","arale/overlay/1.1.1/overlay","arale/position/1.0.1/position","arale/iframe-shim/1.0.2/iframe-shim","arale/widget/1.1.1/widget","arale/base/1.1.1/base","arale/class/1.1.0/class","arale/events/1.1.0/events"],function(a){"use strict";!function(b){var c=a("$"),d=a("arale/tip/1.1.3/tip"),e=function(a,b){return a?(a.style.display=b?b:"block",void 0):!1},f=function(a){return a?(a.style.display="none",void 0):!1},g=new d({element:"#J-label-editer-pop",trigger:"#J-label-editer",pointPos:"50%+2"}),h=b.J_superSwitch?b.J_superSwitch[0]:null,i=b.J_alieditPwd?b.J_alieditPwd[0]:null,j=b.J_standarPwd?b.J_standarPwd[0]:null,k=b.standarPwd?b.standarPwd[0]:null,l=b.safeSignCheck,m=b.J_safeSignCheck?b.J_safeSignCheck[0]:null,n=b.J_isNoActiveX?b.J_isNoActiveX:null,o=b.authcode?b.authcode[0]:null,p=b.J_authcode?b.J_authcode[0]:null,q=b.alieditUsing;system.auth.switchaliedit=function(){function a(){e(j,"inline-block"),f(i,"inline-block"),c(p).length>0&&(c(o).attr("data","validate"),c(p).removeClass("fn-hide")),c(l).removeClass("ui-icon-securityON").addClass("ui-icon-securityOFF"),c(l).on("click",function(a){a.preventDefault();try{system.auth.param.standarPwd&&c(system.auth.param.standarPwd)[0].focus()}catch(a){}}),g.set("disabled",!0)}var b=-1!==(window.navigator.userAgent||"").toLowerCase().indexOf("msie 6");if(c(m).length<1||c(h).length<1||c(n).length<1)return!1;if("true"===c(h).val())if("true"===c(q).val()){var d=function(){c(n).val("false"),f(j),e(i,"inline-block"),c(l).removeClass("ui-icon-securityOFF").addClass("ui-icon-securityON"),c(p).length>0&&(document.getElementsByName("logonIdReadOnly")[0]&&"true"===document.getElementsByName("logonIdReadOnly")[0].value?(c(p).removeClass("fn-hide"),c(o).attr("data","validate")):(c(o).val(""),c(o).attr("data",""),c(p).addClass("fn-hide"))),g.set("content","点此选择非密码控件登录");try{system.auth.alieditAttrs.alieditPwd&&system.auth.alieditAttrs.alieditPwd.focus()}catch(a){}},r=function(){c(n).val("true"),c(k).val(""),f(i),b?e(j,"block"):e(j,"inline-block"),c(l).removeClass("ui-icon-securityON").addClass("ui-icon-securityOFF"),c(p).length>0&&(c(p).removeClass("fn-hide"),c(o).attr("data","validate")),g.set("content","点此选择密码控件登录");try{k.focus()}catch(a){}};alipay.security.edit.installed?(d(),g.set("disabled",!0),c(l).on("click",function(a){a.preventDefault();try{system.auth.alieditAttrs.alieditPwd&&system.auth.alieditAttrs.alieditPwd.focus()}catch(a){}})):("true"===c(n).val()?r():(c(n).val("false"),g.set("content","点此选择非密码控件登录")),c(l).on("click",function(a){a.preventDefault();var b=a.target;if(c(b).hasClass("ui-icon-securityON")){r();try{c(system.auth.param.loginForm).trigger("SWITCH_ALIEDITER_EVENT",!1)}catch(a){}}else{d();try{c(system.auth.param.loginForm).trigger("SWITCH_ALIEDITER_EVENT",!0)}catch(a){}}try{system.auth.adjustheight.inited&&system.auth.adjustheight()}catch(e){}}))}else"false"===c(q).val()&&(c(n).val("false"),a());else c(n).val("true"),a()}}(system.auth.param)}),define("authcenter/login/1.1.3/js/module/btnStyle",["$"],function(a){"use strict";var b=a("$");system.auth.btnStyle=function(a){for(var c in a)this[c]=a[c];return b("#login").length<1||b("#J-login-btn").length<1||!this.isNeedSub?!1:(this.bindEvent(),void 0)},system.auth.btnStyle.prototype={isNeedSub:!1,defaultId:"#J-login-btn",defaultText:"登 录",disabledClass:"ui-button-disabled",disabledText:"正在进入...",bindEvent:function(){var a=this;return a.isNeedSub?(b(system.auth.param.loginForm).on("CLICK_SUBMIT_BUTTON_EVENT",function(c,d){d?(b(a.defaultId).addClass(a.disabledClass),b(a.defaultId).val(a.disabledText),b(a.defaultId).attr("disabled","disabled")):(b(a.defaultId).removeClass(a.disabledClass),b(a.defaultId).val(a.defaultText),b(a.defaultId).removeAttr("disabled"))}),void 0):!1}}}),define("authcenter/login/1.1.3/js/module/validator",["$","arale/validator/0.9.5/validator","arale/widget/1.1.1/widget","arale/base/1.1.1/base","arale/class/1.1.0/class","arale/events/1.1.0/events","arale/placeholder/1.1.0/placeholder"],function(a){"use strict";!function(b){var c=a("$"),d=a("arale/validator/0.9.5/validator"),e=b.standarPwd?b.standarPwd[0]:null,f=b.alieditUsing,g=b.J_isNoActiveX,h=b.loginForm[0],i=b.password,j=c("#J-login-title"),k=c("#J-errorBox"),l=c("#J-label-editer").attr("data-desc"),m=[],n=!1;d.addRule("emailOrMobile",function(a){var b=c(a.element),d=b.val();return system.auth.rule.emailOrMobile(d)}),d.addRule("lenth4",function(a){var b=c(a.element),d=b.val();return 4===d.length}),d.setMessage({required:"请输入{{display}}",emailOrMobile:"支付宝账户是邮箱地址或手机号码。",lenth4:"验证码是4位字符"}),system.auth.validator=function(o){function p(a,b){n?alert(a):(j.addClass("fn-hide"),k.find(".sl-error-text").html(a),k.addClass("sl-error-display"),k.attr("errorType",b))}function q(){j.removeClass("fn-hide"),k.removeClass("sl-error-display"),k.find(".sl-error-text").html(""),k.attr("errorType","")}var r=o?o:{},s=a("arale/placeholder/1.1.0/placeholder");n=r.isAlertType===!0?!0:!1;var t;t=system.auth.instance.validator=new d({element:"#login",explainClass:"ui-form-explain",autoFocus:!1,triggerType:[],onFormValidate:function(){var a=system.auth.alieditAttrs;if(m=[],b.account&&b.account.val(c.trim(b.account.val())),"true"==f.value&&"false"===c(g).val()&&"undefined"!=typeof a.getPassword){i.parent(),i[0].value=a.getPassword(),q();try{h._seaside_gogo_.value=a.getCi1(),a.getCi2()&&(h._seaside_gogo_p.value=a.getCi2())}catch(d){}}else e&&i.val(e.value)},onItemValidated:function(a,b,c){var d=system.auth.alieditAttrs;if(a&&(m.push({dom:c,errorMsg:b}),"password"===c[0].name))try{var g=[];g.push("alieditUsing.value="+("true"==f.value)),g.push("&alieditPwd="+(null!==d.alieditPwd)),g.push("&getPassword="+(""!==d.getPassword())),g.push("&standarPwd.value="+(""!==e.value)),system.auth.log("track",g.join(""))}catch(h){}},onFormValidated:function(a){var b=system.auth.alieditAttrs;if(!a){c("input[name=logonId]").length>0&&s.clear("input[name=logonId]"),c("input[name=checkCode]").length>0&&s.clear("input[name=checkCode]"),c("input[name=operatorNick]").length>0&&s.clear("input[name=operatorNick]");try{c(system.auth.param.loginForm).trigger("CLICK_SUBMIT_BUTTON_EVENT",!0)}catch(d){}}if(a&&m.length>0){n?alert(m[0].errorMsg):p(m[0].errorMsg,"2");try{c(system.auth.param.loginForm).trigger("CLICK_SUBMIT_BUTTON_EVENT",!1)}catch(d){}try{system.auth.adjustheight.inited&&system.auth.adjustheight()}catch(d){}var h=m[0].dom;if(!h)return!1;if("password"===h[0].name)"true"==f.value&&"false"===c(g).val()&&"undefined"!=typeof b.getPassword()?b.alieditPwd&&b.alieditPwd.focus():e&&e.focus();else{try{s.clear(c(h))}catch(d){}setTimeout(function(){h[0].focus()},200)}}}}),c("input[name=logonId]").length>0&&t.addItem({element:"[name=logonId]",required:!0,rule:"emailOrMobile maxlength{max:100}",display:"账户名",skipHidden:!0}),c("input[name=password]").length>0&&t.addItem({element:"[name=password]",required:!0,display:l?l:"登录密码",skipHidden:!1}),c("input[name=password_input]").length>0&&t.addItem({element:"[name=password_input]",required:!0,display:"登录密码",skipHidden:!0}),c("input[name=checkCode]").length>0&&t.addItem({element:"[name=checkCode]",display:"验证码",required:!0,rule:"lenth4",skipHidden:!0}),c("input[name=operatorNick]").length>0&&t.addItem({element:"[name=operatorNick]",display:"操作员登录名",required:!0,skipHidden:!0}),t.before("execute",function(){var a=system.auth.alieditAttrs;return"true"!==f.value||"false"!==c(g).val()||a.installedAliedit?!0:(a.detectAliedit(),!1)})}}(system.auth.param)}),define("authcenter/login/1.1.3/js/module/account",["$"],function(a){"use strict";var b=a("$");b("#J-label-user").on("click",function(a){a.preventDefault(),b("#J-input-user").length>0&&b("#J-input-user")[0].focus()})}),define("authcenter/login/1.1.3/js/module/accountsave",["$","alipay/storex/1.0.1/storex","gallery/json/1.0.3/json","arale/base/1.1.1/base","arale/class/1.1.0/class","arale/events/1.1.0/events","gallery/store/1.3.7/store"],function(a){"use strict";var b=a("$"),c=a("alipay/storex/1.0.1/storex");!function(a){system.auth.accountsaver=function(d){if(d=d||"home-username",c.status().enabled&&a&&""===a.val()){var e=c.get(d);if(e&&system.auth.rule.emailOrMobile(e)){a.val(e);var f='<span class="sl-delect" seed="authcenter-account-delete"><i class="iconfont" title="删除">&#xF045;</i></span>';b(f).appendTo(a.parent()).hover(function(){b(this).addClass("sl-delect-hover")},function(){b(this).removeClass("sl-delect-hover")}),b(a.parent()).delegate(".sl-delect","click",function(e){e.preventDefault(),a.val(""),a.focus();try{c.remove(d)}catch(e){}b(this).remove(),system.auth.log("track","closechacha")})}}},system.auth.accountsaver.save=function(d){if(d=d||"home-username",c.status().enabled&&a){var e=b.trim(a.val());if(e)try{c.set(d,e)}catch(f){}}},system.auth.accountsaver.clear=function(){if(a){a.val("");var c=a.parent(),d=b(c).find(".sl-delect");d.length>0&&b(d).remove()}},system.auth.accountsaver.status=function(b){if(b=b||"home-username",c.status().enabled&&a){var d=c.get(b);return d&&system.auth.rule.emailOrMobile(d)?!0:!1}return!1}}(system.auth.param.account)}),define("authcenter/login/1.1.3/js/module/adjustheight",["$"],function(a){"use strict";{a("$")}!function(a){var b=a.loginForm,c=b.parent();system.auth.adjustheight=function(){system.auth.adjustheight.inited=!0,setTimeout(function(){var a=document.body.offsetHeight,b=c[0].offsetHeight+2;system.auth.log("debug",a+" "+b);try{var d=window.frameElement;d&&(parent.adjustHeight?(parent.adjustHeight(b,d.id),system.auth.log("debug","adjustHeight")):b>d.offsetHeight&&(d.height=b,d.style.height=b+"px",system.auth.log("debug","set iframe height "+b)))}catch(e){}},500)}}(system.auth.param)}),define("authcenter/login/1.1.3/js/module/autocomplete",["$","arale/autocomplete/1.2.2/autocomplete","arale/overlay/1.1.1/overlay","arale/position/1.0.1/position","arale/iframe-shim/1.0.2/iframe-shim","arale/widget/1.1.1/widget","arale/base/1.1.1/base","arale/class/1.1.0/class","arale/events/1.1.0/events","arale/templatable/0.9.1/templatable","gallery/handlebars/1.0.2/handlebars","gallery/handlebars/1.0.2/runtime","alipay/object-shim/1.0.0/object-shim"],function(a){"use strict";var b=a("$"),c=a("arale/autocomplete/1.2.2/autocomplete"),d=a("alipay/object-shim/1.0.0/object-shim");system.auth.autoComplete=function(a){for(var b in a)this[b]=a[b];this.init()},system.auth.autoComplete.prototype={defaultData:["qq.com","163.com","126.com","189.cn","sina.com","hotmail.com","gmail.com","sohu.com","21cn.com"],accountId:"#J-input-user",init:function(){var a=this,e="ui-autocomplete";b(".login-modern").length>0&&(e="ui-autocomplete-modern");var f=new c({trigger:a.accountId,classPrefix:e,submitOnEnter:!1,selectFirst:!0,align:{baseXY:[0,"100%-6px"]},dataSource:function(b){b=b.replace(/^([^@]*)@.*$/,"$1");var c=[];b.match(/[^0-9]/)||c.push(b);for(var d in a.defaultData){var e=d;c.push(b+"@"+a.defaultData[e])}return c},filter:function(a,c){var d=!1,e=[];return b.each(a,function(a,b){c.indexOf("@")>-1&&b===c?d=!0:b.indexOf(c)>-1&&e.push({matchKey:b})}),d?[]:e}}).render();d(f)}}}),define("authcenter/login/1.1.3/js/module/proxyip",["$","alipay/storex/1.0.1/storex","gallery/json/1.0.3/json","arale/base/1.1.1/base","arale/class/1.1.0/class","arale/events/1.1.0/events","gallery/store/1.3.7/store"],function(a){"use strict";a("$");var b=a("alipay/storex/1.0.1/storex"),c=function(){var a=system.auth.alieditAttrs;if(a.alieditPwd)try{return a.getCi2()}catch(b){return""}return""},d=function(a,b){Tracker&&(Tracker.minInterval=0,Tracker.click(a+":"+b),Tracker.minInterval=1e3)},e=function(){if(b.status().enabled){var a=c(),e=b.get("p");a&&e&&e!==a&&(b.set("p",a),d("p",a))}};system.auth.proxyid=function(){setTimeout(e,500)}}),define("authcenter/login/1.1.3/js/module/ignoringSpaces",["$"],function(a){"use strict";var b=a("$");system.auth.ignoringSpaces=function(a){var c=/[ ]/g;a.on("keyup",function(){var d=a.val();b(system.auth.param.loginForm).trigger("IGNORINGSPACES_EVENT_BEFORE",d),null!==d.match(c)&&(d=d.replace(c,""),a.val(d)),b(system.auth.param.loginForm).trigger("IGNORINGSPACES_EVENT_AFTER",d)})}}),define("authcenter/login/1.1.3/js/module/refreshCheckCode",["$","authcenter/login/1.1.3/js/util/uri"],function(a){"use strict";var b=a("$");a("authcenter/login/1.1.3/js/util/uri"),system.auth.refreshCheckCode=function(){var a=b("#J-checkcode-img"),c=a.attr("src"),d=system.auth.uri.getParams(c,!0);d.t=(new Date).getTime(),a.attr("src",system.auth.uri.setParams(c,d)),system.auth.param.authcode.val(""),b(system.auth.param.loginForm).trigger("REFRESHCHECKCODE_EVENT_AFTER")}}),define("authcenter/login/1.1.3/js/util/uri",["$"],function(a){"use strict";var b=a("$"),c=/^(http(s)?:\/\/)?[a-zA-Z.]*((\/)?[^?#]*)/,d=/\?([^#]*)(#.*)?/,e=/(https|http)\:\/\/((\w+|\.)+)/,f=/(\w+|\.)+/;system.auth.uri=function(){},system.auth.uri.getPath=function(a){if(c.test(a)){var b=/^(http(s)?:\/\/)?[a-zA-Z.]*(:\d*)?((\/)?[^?#]*)/.exec(a)[4];return b?b:"/"}return null},system.auth.uri.getPort=function(a){return/\:(\d+)/.test(a)?/\:(\d+)/.exec(a)[1]:"80"},system.auth.uri.getHost=function(a,b){var c=system.auth.uri.getHostName(a),d=system.auth.uri.getPort(a);return b&&"80"==d?c:c+":"+d},system.auth.uri.getHostName=function(a){return e.test(a)?e.exec(a)[2]:f.test(a)?f.exec(a)[0]:null},system.auth.uri.getProtocol=function(a){var b=/^http|^https/,c=/^http\:|^https\:/;return b.test(a)?c.exec(a)[0].replace(":",""):null},system.auth.uri.getParams=function(a,b){var c={},e=d.exec(a);if(e&&e.length&&e.length>=2){e=e[1].split("&");for(var f;f=e.shift();)f.split("=").length>1&&(c[f.split("=")[0]]=f.split("=")[1]);return b?c:system.auth.uri.toQueryString(c)}return b?{}:null},system.auth.uri.getHash=function(a){var c=a||window.location.hash;return"#"==c.charAt(0)?c=c.substring(1):c.lastIndexOf("#")>-1&&(c=c.substring(c.lastIndexOf("#")+1)),b.browser.mozilla?c:decodeURIComponent(c)},system.auth.uri.setParams=function(a,b){var c,d=system.auth.uri.getParams(a,!0),e=[];if("object"==typeof b)for(c in b)d[c]=b[c];for(c in d)e.push(c+"="+d[c]);if(system.auth.uri.getProtocol(a))var f=system.auth.uri.getProtocol(a)+"://";else var f="";return f+system.auth.uri.getHost(a,!0)+system.auth.uri.getPath(a)+"?"+e.join("&")},system.auth.uri.toQueryString=function(a){var c=[];return b.each(a,function(a,b){c.push(a+"="+b)}),c.join("&")}}),define("authcenter/login/1.1.3/js/module/realtimeCheckcode",["$"],function(a){"use strict";var b=a("$");system.auth.realtimeCheckcode=function(a){this.init();for(var b in a)this[b]=a[b];return this.form&&this.form.length<1||this.checkcode&&this.checkcode.length<1||this.checkcodeIcon&&this.checkcodeIcon.length<1?!1:(this.bindEvent(),this.submitAspect(),void 0)},system.auth.realtimeCheckcode.prototype={form:null,checkcodeServer:"verifyCheckCode.json",checkcode:null,checkcodeIcon:null,result:!1,count:0,errorCount:0,timeout:2e3,invalidTime:54e4,initialTime:(new Date).getTime(),nowTime:null,isInvalid:!1,isChecking:!1,nowValue:null,formSubmit_:null,sucDOM:'<i class="iconfont" title="成功">&#xF049;</i>',errDOM:'<i class="iconfont" title="出错">&#xF045;</i>',init:function(){this.form=b("#login")&&b("#login")[0],this.checkcode=b("#J-input-checkcode"),this.checkcodeIcon=b("#J-checkcodeIcon"),b("input[name=idPrefix]").length>0&&(this.idPrefixValue=b("input[name=idPrefix]").val())},request:function(a){var c=this;return c.checkReset(),c.count++,c.nowTime=(new Date).getTime(),c.isInvalid=c.nowTime-c.initialTime>c.invalidTime?!0:!1,c.count>5||c.isInvalid?!1:(c.isChecking=!0,c.nowValue=a,b.ajax({type:"POST",url:c.checkcodeServer,data:{checkCode:a,idPrefix:c.idPrefixValue,timestamp:(new Date).getTime()},dataType:"json",timeout:c.timeout,success:function(a){c.successCallback.call(c,a)},error:function(){c.failureCallback()}}),void 0)},successCallback:function(a){return this.isChecking?(null===a.checkResult?this.checkTimeout():"true"===a.checkResult?(this.formSubmit_&&this.submitForm(),this.checkcodeIcon.addClass("sl-checkcode-suc"),b(this.sucDOM).appendTo(this.checkcodeIcon),this.result=!0):(this.errorCount++,this.checkcodeIcon.addClass("sl-checkcode-err"),b(this.errDOM).appendTo(this.checkcodeIcon),this.checkcode[0].focus(),this.result=!1,this.formSubmit_=null,system.auth.log("track","realtimeCheckcode_errorCount_"+this.errorCount)),void 0):!1},failureCallback:function(){return this.isChecking?(this.formSubmit_?this.submitForm():this.checkTimeout(),system.auth.log("track","realtimeCheckcode_serverFailure"),void 0):!1},checkTimeout:function(){this.result=!0},checkReset:function(){this.checkcodeIcon.removeClass("sl-checkcode-err"),this.checkcodeIcon.removeClass("sl-checkcode-suc"),this.checkcodeIcon.empty(),this.result=!1,this.formSubmit_=null,this.isChecking=!1,this.nowValue=null
},submitAspect:function(){var a=this.form.submit,c=this;this.form.submit=function(){c.formSubmit_=a;var d=b(system.auth.param.loginForm).attr("data-qrcode");if(b("#J-checkcode").hasClass("fn-hide")||"true"===d)c.submitForm();else if(c.count>5||c.isInvalid)c.submitForm();else if(c.result)c.submitForm();else{c.checkcode.val()!==c.nowValue?c.request(c.checkcode.val()):(c.checkcode[0].focus(),c.checkcodeIcon.hasClass("sl-checkcode-err")&&system.auth.log("track","realtimeCheckcode_X"));try{b(system.auth.param.loginForm).trigger("CLICK_SUBMIT_BUTTON_EVENT",!1)}catch(e){}}}},submitForm:function(){var a=this.formSubmit_;if(!a)return!1;try{b(system.auth.param.loginForm).trigger("CLICK_SUBMIT_BUTTON_EVENT",!0)}catch(c){}try{a()}catch(c){a.call(this.form)}},bindEvent:function(){var a=this;b(system.auth.param.loginForm).on("IGNORINGSPACES_EVENT_AFTER",function(b,c){if(c.length<4)a.checkReset();else if(4===c.length){if(a.checkcode.attr("data-type")&&"VOICE"===a.checkcode.attr("data-type"))return a.result=!0,!0;c!==a.nowValue&&a.request(c)}}),b(system.auth.param.loginForm).on("REFRESHCHECKCODE_EVENT_AFTER",function(){a.checkReset()})}}}),define("authcenter/login/1.1.3/js/module/voiceCheckcode",["$","arale/tip/1.1.3/tip","arale/popup/1.1.1/popup","arale/overlay/1.1.1/overlay","arale/position/1.0.1/position","arale/iframe-shim/1.0.2/iframe-shim","arale/widget/1.1.1/widget","arale/base/1.1.1/base","arale/class/1.1.0/class","arale/events/1.1.0/events"],function(a){"use strict";var b=a("$"),c=a("arale/tip/1.1.3/tip");if(b("#J-label-checkcode-pop").length>0)var d=new c({element:"#J-label-checkcode-pop",trigger:"#J-label-checkcode",pointPos:"50%+2"});else b("#J-label-checkcode").on("click",function(a){a.preventDefault(),b("#J-input-checkcode")[0].focus()});system.auth.voiceCheckcode=function(a){this.init();for(var c in a)this[c]=a[c];return this.checkcodeInput&&this.switchCheckCode&&this.checkCodeIMG&&this.checkCodeVOICE&&this.voiceUrl&&""!==this.voiceUrl?/version\/\d+\.\d+(?:\.[ab\d]+)? safari\//.test(navigator.userAgent.toLowerCase())?(d&&(d.set("disabled",!0),b("#J-label-checkcode").on("click",function(a){a.preventDefault(),b("#J-input-checkcode")[0].focus()})),!1):(this.bindEvent(),void 0):!1},system.auth.voiceCheckcode.prototype={checkcodeInput:null,switchCheckCode:null,checkCodeIMG:null,checkCodeVOICE:null,voicePressBg:null,voicePressTxt:null,checkcodeIcon:null,voiceUrl:null,init:function(){this.checkcodeInput=b("#J-input-checkcode"),this.switchCheckCode=b("#J-switchCheckcode"),this.checkCodeIMG=b("#J-checkcode-img"),this.checkCodeVOICE=b("#J-checkcode-voice"),this.voicePressBg=b("#J-checkcode-voice-bg"),this.voicePressTxt=b("#J-checkcode-voice-txt"),this.checkcodeIcon=b("#J-checkcodeIcon"),this.checkCodeVOICE.length>0&&(this.voiceUrl=this.checkCodeVOICE.attr("data-src"))},checkReset:function(){this.checkcodeInput.val(""),b(system.auth.param.loginForm).trigger("REFRESHCHECKCODE_EVENT_AFTER"),this.checkcodeInput[0].focus()},voiceHtml:function(){var a,b=-1!==(window.navigator.userAgent||"").toLowerCase().indexOf("msie 6"),c=-1!==(window.navigator.userAgent||"").toLowerCase().indexOf("msie");try{a="Audio"in window&&(new Audio).canPlayType("audio/x-wav;")?function(){return"<audio autoplay hidden id='J-bgsound'></audio>"}:b?function(){return"<bgsound id='J-bgsound' >"}:function(){return"<embed id='J-bgsound'"+(c?" type='application/x-mplayer2'":" type='audio/x-wav'")+" autostart='true' hidden='true' />"}}catch(d){a=b?function(){return"<bgsound id='J-bgsound' >"}:function(){return"<embed id='J-bgsound'"+(c?" type='application/x-mplayer2'":" type='audio/x-wav'")+" autostart='true' hidden='true' />"},system.auth.log("track","voickCheckcode - "+d)}return a()},bindEvent:function(){function a(){e.switchCheckCode.removeClass("ui-icon-checkcodeV").addClass("ui-icon-checkcodeT"),d.set("content","点此选择语音验证码"),e.checkCodeIMG.removeClass("fn-hide"),e.checkCodeVOICE.addClass("fn-hide"),e.checkcodeInput.attr("data-type")&&e.checkcodeInput.attr("data-type","IMAGE")}function c(){e.switchCheckCode.removeClass("ui-icon-checkcodeT").addClass("ui-icon-checkcodeV"),d.set("content","点此选择图片验证码"),e.checkCodeIMG.addClass("fn-hide"),e.checkCodeVOICE.removeClass("fn-hide"),e.checkcodeInput.attr("data-type")&&e.checkcodeInput.attr("data-type","VOICE")}var e=this;e.switchCheckCode.on("click",function(d){d.preventDefault();var f=d.target;e.checkReset(),b(f).hasClass("ui-icon-checkcodeT")?(c(),e.playVoice()):(a(),e.stopPlayVoice(),e.voicePressBg.css({width:"0%"}))}),e.checkCodeVOICE.on("click",function(a){a.preventDefault(),e.checkReset(),e.refreshVoice()})},playVoice:function(){var a=this;if(b("#J-bgsound").length<1){var c=null;-1!==(window.navigator.userAgent||"").toLowerCase().indexOf("msie 6")?(c=document.createElement("bgsound"),c.id="J-bgsound"):c=b(a.voiceHtml()),b(c).appendTo(b(document.body))}if(b("#J-bgsound").attr("src",a.getVoiceUrl()),a.audioSupport){b("#J-bgsound")[0].pause(),b("#J-bgsound")[0].play();var d=document.getElementById("J-bgsound");d.addEventListener("timeupdate",function(){this.duration&&1/0!==this.duration?a.playVoiceProcess(parseInt(100*this.currentTime/this.duration,10)):a.playVoiceProcess(-1)}),d.addEventListener("ended",function(){a.playVoiceProcess(100)})}else a.playVoiceProcess("NOPROCESS")},getVoiceUrl:function(){var a=system.auth.uri.getParams(this.voiceUrl,!0);return a.r=(new Date).getTime(),system.auth.uri.setParams(this.voiceUrl,a)},refreshVoice:function(){this.audioSupport?(b("#J-bgsound").attr("src",this.getVoiceUrl()),b("#J-bgsound")[0].pause(),b("#J-bgsound")[0].play()):(this.stopPlayVoice(),this.playVoice())},stopPlayVoice:function(){var a=b("#J-bgsound");if(this.audioSupport){a[0].pause();try{a.attr("src","")}catch(c){}}else try{b("#J-bgsound").attr("src",""),b("#J-bgsound").remove()}catch(c){system.auth.log("track","voickCheckcode_stop - "+c)}},audioSupport:function(){try{return"Audio"in window&&(new Audio).canPlayType("audio/x-wav")}catch(a){return!1}}(),playVoiceProcess:function(a){switch(a){case-1:this.voicePressTxt.html('<i class="ui-icon ui-icon-voicing" title="声音"></i>播放中...');break;case 100:case"NOPROCESS":this.voicePressTxt.html('<i class="ui-icon ui-icon-loading" title="加载中"></i>重新播放'),this.voicePressBg.css({width:"0%"});break;default:this.voicePressTxt.html('<i class="ui-icon ui-icon-voicing" title="声音"></i>播放中...'),this.voicePressBg.css({width:a+"%"})}}}}),define("authcenter/login/1.1.3/js/module/alilogin",["$"],function(a){"use strict";var b=a("$");system.auth.aliLogin=function(a){for(var b in a)this[b]=a[b];this.autoLogin?this.loginTokenRequest():this.formCont_&&this.loginDom&&this.loginNameDom&&this.havanaSsoUrl?this.init():this.showFormDom()},system.auth.aliLogin.prototype={formCont_:b("#login"),loginDom:b("#J-ssoLogin"),loginNameDom:b("#J-ssoLogin-name"),loginIconDom:b("#J-ssoLogin-icon"),loginBtn:b("#J-ssoLogin-btn"),changeBtn:b("#J-ssoLogin-change"),havanaSsoUrl:null,authTokenServer:"havana_trust_login.htm",timeout:1e3,tokenValue:"",isTokenRequested:!1,isHomePage:!1,isHomePageShowed:!1,siteValue:1,autoLogin:!1,site:null,gotoUrl:"",isShowQRLogin:!1,companyList:{company_0:"taobao",company_3:"cbu",company_4:"icbu",company_6:"aliyun",company_7:"aliyunOS",company_8:"aliyun",company_9:"aliyun",company_10:"taobao"},init:function(){this.blindEvent(),this.loginNameRequest()},qrSign:function(a){"true"===a?this.loginDom.attr("data-hide","true"):this.loginDom.attr("data-hide","false")},blindEvent:function(){var a=this;this.changeBtn.click(function(b){b.preventDefault(),a.showFormDom(),a.qrSign("true")}),this.loginBtn.click(function(b){b.preventDefault(),a.isTokenRequested||(a.loginTokenRequest(),a.isTokenRequested=!0,a.loginBtn.text("正在进入..."),a.loginBtn.addClass("ui-button-disabled"),a.changeBtn.addClass("fn-hide"))})},getInputValue:function(a){return document.getElementsByName(a)[0]?document.getElementsByName(a)[0].value:""},loginNameRequest:function(){var a=this;b.ajax({type:"POST",url:a.havanaSsoUrl+"/api/havana_top.js",data:{site:a.siteValue,single:!0},dataType:"jsonp",timeout:a.timeout,jsonp:"callback",charset:"UTF-8",success:function(b){a.loginNameSuccessCallback(b),a.loginDom.attr("data-state","finished")},error:function(){a.loginNameFailureCallback(),system.auth.log("track","aliLogin_request_token_failure"),a.loginDom.attr("data-state","error")}})},loginNameSuccessCallback:function(a){200===a.code&&a.data&&a.data[0]&&"number"==typeof a.data[0].site&&1!==a.data[0].site&&""!==system.auth.util.trimAll(a.data[0].loginId)?(this.showLoginMsgDom(a.data[0].site,a.data[0].loginId),this.isHomePage&&this.showHomePage()):this.loginNameFailureCallback()},loginNameFailureCallback:function(){this.showFormDom(),this.isHomePage&&this.showHomePage()},showLoginMsgDom:function(a,b){this.companyList["company_"+a]&&this.loginIconDom.addClass("icon-sso-"+this.companyList["company_"+a]),this.loginNameDom.html(system.auth.util.limitEmail(b)),this.isShowQRLogin&&this.qrSign("false"),this.loginDom.removeClass("fn-hide"),this.formCont_.addClass("fn-hide"),this.onLoginMsgShow&&this.onLoginMsgShow.call(this,b)},showFormDom:function(){this.isShowQRLogin&&this.qrSign("true"),this.formCont_.removeClass("fn-hide"),this.loginDom.addClass("fn-hide"),this.onFormShow&&this.onFormShow.call(this)},showHomePage:function(){!this.isHomePageShowed&&system.auth.crossIframe&&system.auth.crossIframe()},loginTokenRequest:function(){if(!this.isTokenRequested){var a=this,c=a.getInputValue("site");a.isTokenRequested=!0,a.tokenValue="";var d={};d=""!==c?{site:a.siteValue,formSite:c}:{site:a.siteValue},b.ajax({type:"POST",url:a.havanaSsoUrl+"/mini_login_check.js",data:d,dataType:"jsonp",timeout:a.timeout,jsonp:"callback",success:function(b){a.loginTokenSuccessCallback(b)},error:function(){a.loginTokenFailureCallback(),system.auth.log("track","aliLogin_request_token_failure")}})}},loginTokenSuccessCallback:function(a){200===a.code&&a.data&&null!==a.data.st&&a.data.st.length>0?this.tokenValue=a.data.st:system.auth.log("track","aliLogin_request_token_dataError"),this.jumpPage()},loginTokenFailureCallback:function(){this.jumpPage()},jumpPage:function(){try{var a=this.authTokenServer+"?token="+this.tokenValue+"&goto="+encodeURIComponent(this.getInputValue("goto"))+"&sso_hid="+this.getInputValue("sso_hid")+"&autoLogin="+this.autoLogin+"&site="+this.getInputValue("site");this.isHomePage?window.parent.location=a:window.location=a}catch(b){this.showFormDom()}}}}),define("authcenter/login/1.1.3/js/scene/alipay",["$"],function(a){"use strict";var b=a("$");!function(a){var c=a.authcode,d=a.standarPwd,e=a.password;system.auth.alipay=function(a){system.auth.accountsaver.clear(),system.auth.accountsaver(a),b(d).val(""),b(e).val(""),b(c).length>0&&b(c).val("")}}(system.auth.param)}),define("authcenter/login/1.1.3/js/module/indexBg",["$"],function(a){"use strict";var b=a("$");system.auth.indexBg=function(a){this.init();for(var b in a)this[b]=a[b];return this.imgTarget.length<1||this.imgParent.length<1||!this.picArr||this.authCnt.length<1?!1:(this.bindEvent(),void 0)},system.auth.indexBg.prototype={imgTarget:null,imgParent:null,authCnt:null,currentDate:"",scene:"",picArr:null,needRandom:!0,splitPic:function(a,b,c,d){if(b&&a.holidays[b])return a.holidays[b];if(c&&a.scene[c])return a.scene[c];if(d&&a.random.length>0){var e=Math.floor(Math.random()*a.random.length);return a.random[e]}var f=new Date,g=f.getHours();return g>=0&&6>g?a.hours[0]:g>=6&&12>g?a.hours[1]:g>=12&&18>g?a.hours[2]:g>=18&&24>g?a.hours[3]:void 0},imgFactory:function(){return function(a,b,c,d){var e,f,g,h,i,j=new Image;return j.src=a,j.complete?(b.call(j),c&&c.call(j),!0):(f=j.width,g=j.height,j.onerror=function(){d&&d.call(j),j=j.onload=j.onerror=null},e=function(){h=j.width,i=j.height,(h!==f||i!==g||h*i>1024)&&(b.call(j),e.end=!0)},e(),j.onload=function(){e.end||e(),c&&c.call(j),j=j.onload=j.onerror=null},void 0)}}(),init:function(){this.imgTarget=b("#J-authcenter-bgImg"),this.imgParent=b("#J-authcenter-bg"),this.authCnt=b("#J-authcenter")},bindEvent:function(){var a=this,c=a.splitPic(a.picArr,a.currentDate,a.scene,a.needRandom),d=c[0],e=c[1];"true"===e?a.imgFactory(d,function(){},function(){b(".authcenter-body").css({backgroundImage:"url("+d+")"})},function(){}):a.imgFactory(d,function(){},function(){var c=this.width,d=this.height;a.imgTarget.attr("src",this.src),a.authCnt.removeClass("authcenter-nobg"),a.imgTarget.addClass("authcenter-bg-show"),a.resizeBg(c,d),b(window).resize(function(){a.resizeBg(c,d)})},function(){})},resizeBg:function(a,c){var d=this,e=b(window).width(),f=b(window).height();if(f<b(document.body).height()&&(f=b(document.body).height()),d.imgParent.css({width:e+"px",height:f+"px"}),e/f>=a/c){var g=parseInt(e/a*c,10),h=parseInt((f-g)/2,10);d.imgTarget.css({width:e+"px",height:g+"px",top:h+"px",left:""})}else{var i=parseInt(f/c*a,10),j=parseInt((e-i)/2,10);d.imgTarget.css({width:i+"px",height:f+"px",top:"",left:j+"px"})}var k=-1!==(window.navigator.userAgent||"").toLowerCase().indexOf("msie");k&&(e>779&&990>e?d.authCnt.addClass("sl-ie"):e>320&&780>e?(d.authCnt.addClass("sl-ie"),d.authCnt.addClass("sl-ie-min")):(d.authCnt.removeClass("sl-ie"),d.authCnt.removeClass("sl-ie-min")))}}}),define("authcenter/login/1.1.3/js/module/qrcode",["$","alipay/storex/1.0.1/storex","gallery/json/1.0.3/json","arale/base/1.1.1/base","arale/class/1.1.0/class","arale/events/1.1.0/events","gallery/store/1.3.7/store"],function(a){"use strict";var b=a("$"),c=a("alipay/storex/1.0.1/storex");system.auth.qrCode=function(a){for(var c in a)this[c]=a[c];return b("#J-qrcode-target").length<1||b("#J-qrcode").length<1||b("#J-loginFormMethod").length<1?!1:(this.init(),void 0)},system.auth.qrCode.show=function(a){b("#J-input-user").focus(),b("#J-login").addClass("fn-hide"),b("#J-qrcode").removeClass("fn-hide"),b("#J-ssoLogin").length>0&&b("#J-ssoLogin").addClass("fn-hide"),b("#J-qrcode-target").removeClass("qrcode-target-show").addClass("qrcode-target-hide"),b("#J-qrcode-target").attr("title","返回"),b("#J-qrcode-target").attr("seed","authcenter-qrhide"),b("#J-loginFormMethod").val("qrCodeLogin"),"true"===a&&(setTimeout(function(){b("#J-qrcode-tips").addClass("qrcode-tips-show"),b("#J-qrcode-tips").html("钱包注册用户仅限扫码登录")},100),setTimeout(function(){b("#J-qrcode-tips").removeClass("qrcode-tips-show"),b("#J-qrcode-tips").html("")},8e3)),"false"===a&&b("#J-qrcode-tips").addClass("fn-hide"),window.light&&light.page&&light.page.products&&light.page.products.barcode&&light.page.products.barcode.start()},system.auth.qrCode.prototype={target:b("#J-qrcode-target"),toggleClassName:"fn-hide",formId:b("#J-login"),qrId:b("#J-qrcode"),qrTitle:"#J-qrcode-title",qrErrorBox:"#J-qrcode-errorBox",qrImage:"#J-qrcode-img",qrIntro:"#J-qrcode-intro",qrMethod:"#J-loginFormMethod",showDefault:!0,hasSSOLogin:!1,showQR:function(){this.hasSSOLogin?(b("#J-ssoLogin").addClass(this.toggleClassName),b(this.formId).addClass(this.toggleClassName)):b(this.formId).addClass(this.toggleClassName),b(this.qrId).removeClass(this.toggleClassName),b(this.target).removeClass("qrcode-target-show").addClass("qrcode-target-hide"),b(this.target).attr("title","返回"),b(this.target).attr("seed","authcenter-qrhide"),b(this.qrMethod).val("qrCodeLogin"),b("#J-qrcode-tips").removeClass("fn-hide"),window.light&&light.page&&light.page.products&&light.page.products.barcode&&light.page.products.barcode.start()},hideQR:function(){if(this.hasSSOLogin){var a=b("#J-ssoLogin").attr("data-hide");a=b.trim(a),"true"===a?b(this.formId).removeClass(this.toggleClassName):b("#J-ssoLogin").removeClass(this.toggleClassName)}else b(this.formId).removeClass(this.toggleClassName);b(this.qrId).addClass(this.toggleClassName),b(this.target).removeClass("qrcode-target-hide").addClass("qrcode-target-show"),b(this.target).attr("title","扫码登录"),b(this.target).attr("seed","authcenter-qrshow"),b(this.qrMethod).val(""),window.light&&light.page&&light.page.products&&light.page.products.barcode&&light.page.products.barcode.onready(function(){this.stop()}),this.clearQRState()},saveQRState:function(){c.status().enabled&&c.set("qrLogin","true")},readQRState:function(){function a(){var a=0,c=setInterval(function(){var d=b("#J-ssoLogin").attr("data-state");if("start"!==d){var e=b("#J-ssoLogin").attr("data-hide");"true"===e&&system.auth.qrCode.show("false"),clearInterval(c)}else a++,a>4&&clearInterval(c)},200)}var d=this;if(c.status().enabled){var e=c.get("qrLogin");e&&(d.hasSSOLogin?a():system.auth.qrCode.show("false"))}},clearQRState:function(){if(c.status().enabled){var a=c.get("qrLogin");if(a)try{c.remove("qrLogin")}catch(b){}}},bindEvent:function(){var a=this;b(a.target).on("click",function(c){c.preventDefault();var d=c.target;if(a.hasSSOLogin){var e=b("#J-ssoLogin").attr("data-state");"start"!==e&&(b(d).hasClass("qrcode-target-show")?a.showQR():a.hideQR())}else b(d).hasClass("qrcode-target-show")?a.showQR():a.hideQR()}),b("#J-qrcode-gethelp").hover(function(){b(a.qrImage).css({display:"none"}),b(a.qrIntro).addClass("qrcode-detail-intro-show")},function(){b(a.qrImage).css({display:"block"}),b(a.qrIntro).removeClass("qrcode-detail-intro-show")}),b("#J-qrcode-errorBox").hasClass("sl-error-display")&&setTimeout(function(){b(a.qrTitle).removeClass("fn-hide"),b(a.qrErrorBox).removeClass("sl-error-display"),b(a.qrErrorBox).find(".sl-error-text")[0].innerHTML="",b(a.qrErrorBox).attr("errorType","1")},3e3),b(system.auth.param.loginForm).on("GREEN_WAY_ROF_QRCODE",function(){b(system.auth.param.loginForm).attr("data-qrcode","true")}),light.ready(function(){window.light&&light.page&&light.page.products&&light.page.products.barcode&&(light.page.products.barcode.onready(function(){b(a.target).hasClass("qrcode-target-show")&&this.stop()}),b(system.auth.param.loginForm).attr("data-qrcode","false"),light.page.products.barcode.onConfirm(function(){b(system.auth.param.loginForm).trigger("GREEN_WAY_ROF_QRCODE"),a.saveQRState(),document.getElementById("login").submit()}))})},init:function(){this.bindEvent(),this.showDefault&&this.readQRState()}}});
