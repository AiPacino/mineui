light.has("/alipay/security/mobile")||function(b,k){try{window==window.parent&&b.client.storage.set("mobileSendTime",-1)}catch(i){}var a={Name:"mobile",defaults:{id:"",autoSend:!0,isBind:"",ajaxUrl:"",countdownBefore:null,countdownAfter:null,requestBefore:null,requestAfter:null}},d={sms:{className:".sms-btn",btnText:"\u91cd\u65b0\u83b7\u53d6\u77ed\u4fe1",interval:120,prompt_send:"\u6821\u9a8c\u7801\u5df2\u53d1\u9001\uff0c30\u5206\u949f\u5185\u8f93\u5165\u6709\u6548\uff0c\u8bf7\u52ff\u6cc4\u9732",
prompt_default:"\u6821\u9a8c\u7801\u662f6\u4f4d\u6570\u5b57\uff0c30\u5206\u949f\u5185\u8f93\u5165\u6709\u6548\uff0c\u8bf7\u52ff\u6cc4\u9732"},phone:{className:".phone-btn",btnText:"\u4f7f\u7528\u8bed\u97f3\u83b7\u53d6",interval:120,prompt_send:"\u652f\u4ed8\u5b9d\u5c06\u5411\u60a8\u7684\u624b\u673a\u62e8\u6253\u7535\u8bdd\u5e76\u64ad\u62a5\u6821\u9a8c\u7801\u3002<br />\u6765\u7535\u53f7\u7801\u4e3a\uff1a0571-26883721,\u8bf7\u7a0d\u5019...",prompt_default:"\u6821\u9a8c\u7801\u662f6\u4f4d\u6570\u5b57\uff0c30\u5206\u949f\u5185\u8f93\u5165\u6709\u6548\uff0c\u8bf7\u52ff\u6cc4\u9732"}};
a.properties={targets:[]};a=b.register("/alipay/security/mobile",window,b.deriveFrom(k.base,{ready:!0,render:function(c){b.isFunction(c)&&this._readyList.push(c);this.element=this.options.uniqElement;for(c=this._readyList;c.length;)c.shift().apply(this)},getValue:function(){return{mobileAckCode:this.element.value}},postInit:function(){var c=this,a=this.options;this.container=b.node(this.options.uniqElement).parent(".ui-form-item");this.itemExp=this.container.find(".ui-form-explain");b.each(d,function(b,
d){var g=c.container.find(d.className);g.length&&(g.type=b,!a.defaultType&&(a.defaultType=b),c.targets.push(g))});this.targets.length||b.log("No mode used.");a.autoSend&&this.request("sms");this.bind()},bind:function(){var c=this,a=this.options;this.options.autoSend||this.container.find(".send-btn").click(function(){b.node(this).addClass("fn-hide");c.container.find(".ui-form-field, .ui-form-explain").removeClass("fn-hide");c.request("sms")});this.container.find(".reSend-btn").click(function(d){d.cancel();
b.node(this).addClass("fn-hide");c.container.find(".sms-btn, .phone-btn").removeClass("fn-hide");c.sendSuccess(a.defaultType);c.countdown(a.defaultType)});b.each(this.targets,function(b,a){a.click(function(){c.send(a.type)})});b.ready(function(){b.node(".phone-btn").length&&(c.pop=new b.pop({targets:b.node(".phone-btn"),className:"ui-securitycore",width:400}))})},send:function(c){c=c||this.options.defaultType;this.countdown(c);this.request(c)},countdown:function(c){var b=this,a=b.options,c=c||a.defaultType,
f=d[c].interval;a.countdownBefore&&a.countdownBefore();(function(){0<f--?(b.toggleBtnUI(f),setTimeout(arguments.callee,1E3)):(b.updatePrompt(c,"prompt_default"),b.toggleBtnUI(f,!0),b.container.removeClass("ui-form-item-success"),a.countdownAfter&&a.countdownAfter())})()},toggleBtnUI:function(c,a){var h=this,f,g=a?"removeClass":"addClass";b.each(this.targets,function(b,j){f=a?d[j.type].btnText:"\uff08"+c+"\u79d2\u540e\uff09"+d[j.type].btnText;a||h.pop&&h.pop.hide();j[g]("ui-checkcode-messagecode-disabled-btn").attr("disabled",
!a).attr("value",f)})},updatePrompt:function(a,b){this.container.find(".ui-form-explain").html(d[a][b])},request:function(a){if(window!=window.parent){var e=(new Date).getTime(),h=Number(b.client.storage.get("mobileSendTime"));if(0>e-h){this.sendSuccess(a);return}}var f=this,g=this.options,e={},a=a||g.defaultType;g.requestBefore&&g.requestBefore();this.inputMobileNo&&(e.inputMobileNo=this.inputMobileNo);e.type=a;e.securityId=b.node(this.options.uniqElement).parent(".J-securitycoreMain").attr("data-request");
e.rnd=Math.random();e.validateProductName=this.options.productName;b.request(g.ajaxUrl,e,{method:"JSONP",success:function(e){if(e.info.sent){try{window!=window.parent?b.client.storage.set("mobileSendTime",(new Date).getTime()):b.client.storage.set("mobileSendTime",-1)}catch(h){}f.sendSuccess(a)}else f.showError(e.info);if(d[a].interval<=0)d[a].interval=120;var i=setInterval(function(){d[a].interval--;d[a].interval<=0&&clearInterval(i)},1E3);g.requestAfter&&f.options.requestAfter(e)}})},showError:function(a){this.itemExp.html(a.errorMessage);
this.container.removeClass("ui-form-item-success").addClass("ui-form-item-error")},sendSuccess:function(a){a=a||this.options.defaultType;this.container.removeClass("ui-form-item-error").addClass("ui-form-item-success");this.updatePrompt(a,"prompt_send")}},a))}(window.light,alipay.security);
light.has("/alipay/security/credibleMobile")||function(b){try{window==window.parent&&b.client.storage.set("credibleMobileSendTime",-1)}catch(k){}var i=function(){this.init.apply(this,arguments);this.bind()};i.prototype={_cg:{item:"ui-form-item",itemSuccess:"ui-form-item-success",itemError:"ui-form-item-error",itemExp:"ui-form-explain"},init:function(a){a=this.opt=a;a.dataId=a.id+(new Date).getTime()+Math.floor(1E3*Math.random());b.node("[id="+a.id+"]:not([data-id]):first").attr("data-id",a.dataId);
this.opt.uniqElement=b.node("[data-id="+a.dataId+"]:first")[0];this.element=this.opt.uniqElement;this.container=b.node(this.element).parent("."+this._cg.item);this.validateBtn=this.container.find(".validate-btn");this.itemExp=this.container.find("."+this._cg.itemExp);this.preExp=this.itemExp.html()||"";this.opt.mobile?(this.opt.mobile.origin="credible",this.opt.mobile.credibleValidate=!1,this.opt.mobile.credibleMobile=this):b.log("Mobile did not start.")},bind:function(){var a=this;this.validateBtn.click(function(){a.validateNum()});
b.node(this.element).focus(function(){a.showDefault()})},validateNum:function(){var a=this.element.value;0===a.replace(/[^\x00-\xff]/g,"**").length?this.showError({msg:"\u8bf7\u8f93\u5165\u624b\u673a\u53f7\u7801\u3002"}):/\d{11}/.test(a)?this.request():this.showError({msg:"\u624b\u673a\u53f7\u7801\u6709\u8bef\u3002"})},request:function(){var a=this,d=b.trim(this.element.value),c={};if(window!=window.parent){var e=(new Date).getTime(),h=Number(b.client.storage.get("credibleMobileSendTime")),f=b.client.storage.get("credibleMobileNo");
if(d==f&&0>e-h){this.validateNumSuc({info:{validated:!0}});return}}c.inputMobileNo=d;c.securityId=b.node(this.opt.uniqElement).parent(".J-securitycoreMain").attr("data-request");c.validateProductName="ctu_mobile";b.request(this.opt.ajaxUrl,c,{method:"JSONP",success:function(c){if(c.info.validated)try{window!=window.parent?(b.client.storage.set("credibleMobileSendTime",(new Date).getTime()),b.client.storage.set("credibleMobileNo",d)):b.client.storage.set("credibleMobileSendTime",-1)}catch(e){}a.validateNumSuc(c)}})},
validateNumSuc:function(a){a.info.validated?(this.container.find(".ui-form-explain").addClass("fn-hide"),this.container.find(".ui-form-field").addClass("ui-form-text").html(this.element.value),this.container.addClass(this._cg.itemSuccess),b.node(".mobile-section .ui-form-item-counter").removeClass("fn-hide"),this.opt.mobile?(this.opt.mobile.credibleValidate=!0,this.opt.mobile.inputMobileNo=b.trim(this.element.value),this.opt.mobile.sendSuccess()):b.log("Mobile did not start.")):this.error(a)},error:function(a){var a=
a.info,b="";5<=a.errorCount&&this.validateBtn.addClass("ui-checkcode-messagecode-disabled-btn").attr("disabled",!0);b=b||a.errorMessage;this.showError({code:a.errorCode,msg:b})},showError:function(a){this.itemExp.html(a.msg);this.container.addClass(this._cg.itemError)},showDefault:function(){this.itemExp.html(this.preExp);this.container.removeClass(this._cg.itemError)}};b.register("/alipay/security/credibleMobile",window,i)}(window.light);