define("kirin/report/1.0.0/report",["$","moment","calendar","overlay","position","iframe-shim","widget","base","templatable","handlebars","validator","select","cookie","tip","popup","confirmbox","dialog","mask","placeholders","tip","zeroclipboard","date-slider","slider","xbox","object-shim","poptip","request","./biz/uri","./biz/custom-menu","./biz/custom-menu-tpl","./biz/top-tip"],function(a,b,c){c.exports={$:a("$"),gallery:{moment:a("moment"),zeroclipboard:a("zeroclipboard")},arale:{Calendar:a("calendar"),Validator:a("validator"),ValidatorCore:a("validatorCore"),IframeShim:a("iframe-shim"),Overlay:a("overlay"),cookie:a("cookie"),Tip:a("tip"),ConfirmBox:a("confirmbox"),placeholder:a("placeholders")},alipay:{Select:a("select"),DateSlider:a("date-slider"),Xbox:a("xbox"),PopTip:a("poptip"),request:a("request")},biz:{URI:a("./biz/uri"),CustomMenu:a("./biz/custom-menu"),TopTip:a("./biz/top-tip")}}}),define("kirin/report/1.0.0/biz/uri",[],function(){function a(b,c){return this instanceof a?(void 0===b&&(b="undefined"!=typeof location?location.href+"":""),this.href(b),void 0!==c?this.absoluteTo(c):this):new a(b,c)}function b(a){return a.replace(/([.*+?^=!:${}()|[\]\/\\])/g,"\\$1")}function c(a){return"[object Array]"===String(Object.prototype.toString.call(a))}function d(a,b){var d,e,f={};if(c(b))for(d=0,e=b.length;e>d;d++)f[b[d]]=!0;else f[b]=!0;for(d=0,e=a.length;e>d;d++)void 0!==f[a[d]]&&(a.splice(d,1),e--,d--);return a}function e(a){return encodeURIComponent(a).replace(/[!'()*]/g,escape).replace(/\*/g,"%2A")}var f=a.prototype,g=Object.prototype.hasOwnProperty;a.duplicateQueryParameters=!1,a.protocol_expression=/^[a-z][a-z0-9-+-]*$/i,a.idn_expression=/[^a-z0-9\.-]/i,a.punycode_expression=/(xn--)/i,a.ip4_expression=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,a.ip6_expression=/^\s*((([0-9A-Fa-f]{1,4}:){7}([0-9A-Fa-f]{1,4}|:))|(([0-9A-Fa-f]{1,4}:){6}(:[0-9A-Fa-f]{1,4}|((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){5}(((:[0-9A-Fa-f]{1,4}){1,2})|:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){4}(((:[0-9A-Fa-f]{1,4}){1,3})|((:[0-9A-Fa-f]{1,4})?:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){3}(((:[0-9A-Fa-f]{1,4}){1,4})|((:[0-9A-Fa-f]{1,4}){0,2}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){2}(((:[0-9A-Fa-f]{1,4}){1,5})|((:[0-9A-Fa-f]{1,4}){0,3}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){1}(((:[0-9A-Fa-f]{1,4}){1,6})|((:[0-9A-Fa-f]{1,4}){0,4}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(:(((:[0-9A-Fa-f]{1,4}){1,7})|((:[0-9A-Fa-f]{1,4}){0,5}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(%.+)?\s*$/,a.find_uri_expression=/\b((?:[a-z][\w-]+:(?:\/{1,3}|[a-z0-9%])|www\d{0,3}[.]|[a-z0-9.\-]+[.][a-z]{2,4}\/)(?:[^\s()<>]+|\(([^\s()<>]+|(\([^\s()<>]+\)))*\))+(?:\(([^\s()<>]+|(\([^\s()<>]+\)))*\)|[^\s`!()\[\]{};:'".,<>?«»“”‘’]))/gi,a.defaultPorts={http:"80",https:"443",ftp:"21",gopher:"70",ws:"80",wss:"443"},a.invalid_hostname_characters=/[^a-zA-Z0-9\.-]/,a.encode=e,a.decode=decodeURIComponent,a.iso8859=function(){a.encode=escape,a.decode=unescape},a.unicode=function(){a.encode=e,a.decode=decodeURIComponent},a.characters={pathname:{encode:{expression:/%(24|26|2B|2C|3B|3D|3A|40)/gi,map:{"%24":"$","%26":"&","%2B":"+","%2C":",","%3B":";","%3D":"=","%3A":":","%40":"@"}},decode:{expression:/[\/\?#]/g,map:{"/":"%2F","?":"%3F","#":"%23"}}},reserved:{encode:{expression:/%(21|23|24|26|27|28|29|2A|2B|2C|2F|3A|3B|3D|3F|40|5B|5D)/gi,map:{"%3A":":","%2F":"/","%3F":"?","%23":"#","%5B":"[","%5D":"]","%40":"@","%21":"!","%24":"$","%26":"&","%27":"'","%28":"(","%29":")","%2A":"*","%2B":"+","%2C":",","%3B":";","%3D":"="}}}},a.encodeQuery=function(b){return a.encode(b+"").replace(/%20/g,"+")},a.decodeQuery=function(b){return a.decode((b+"").replace(/\+/g,"%20"))},a.recodePath=function(b){for(var c=(b+"").split("/"),d=0,e=c.length;e>d;d++)c[d]=a.encodePathSegment(a.decode(c[d]));return c.join("/")},a.decodePath=function(b){for(var c=(b+"").split("/"),d=0,e=c.length;e>d;d++)c[d]=a.decodePathSegment(c[d]);return c.join("/")};var h,i={encode:"encode",decode:"decode"},j=function(b,c){return function(d){return a[c](d+"").replace(a.characters[b][c].expression,function(d){return a.characters[b][c].map[d]})}};for(h in i)a[h+"PathSegment"]=j("pathname",i[h]);a.encodeReserved=j("reserved","encode"),a.parse=function(b,c){var d;return c||(c={}),d=b.indexOf("#"),d>-1&&(c.fragment=b.substring(d+1)||null,b=b.substring(0,d)),d=b.indexOf("?"),d>-1&&(c.query=b.substring(d+1)||null,b=b.substring(0,d)),"//"===b.substring(0,2)?(c.protocol="",b=b.substring(2),b=a.parseAuthority(b,c)):(d=b.indexOf(":"),d>-1&&(c.protocol=b.substring(0,d),c.protocol&&!c.protocol.match(a.protocol_expression)?c.protocol=void 0:"file"===c.protocol?b=b.substring(d+3):"//"===b.substring(d+1,d+3)?(b=b.substring(d+3),b=a.parseAuthority(b,c)):(b=b.substring(d+1),c.urn=!0))),c.path=b,c},a.parseHost=function(a,b){var c,d,e=a.indexOf("/");return-1===e&&(e=a.length),"["===a[0]?(c=a.indexOf("]"),b.hostname=a.substring(1,c)||null,b.port=a.substring(c+2,e)||null):a.indexOf(":")!==a.lastIndexOf(":")?(b.hostname=a.substring(0,e)||null,b.port=null):(d=a.substring(0,e).split(":"),b.hostname=d[0]||null,b.port=d[1]||null),b.hostname&&"/"!==a.substring(e)[0]&&(e++,a="/"+a),a.substring(e)||"/"},a.parseAuthority=function(b,c){return b=a.parseUserinfo(b,c),a.parseHost(b,c)},a.parseUserinfo=function(b,c){var d,e=b.indexOf("@"),f=b.indexOf("/");return e>-1&&(-1===f||f>e)?(d=b.substring(0,e).split(":"),c.username=d[0]?a.decode(d[0]):null,d.shift(),c.password=d[0]?a.decode(d.join(":")):null,b=b.substring(e+1)):(c.username=null,c.password=null),b},a.parseQuery=function(b){if(!b)return{};if(b=b.replace(/&+/g,"&").replace(/^\?*&*|&+$/g,""),!b)return{};for(var c,d,e,f={},g=b.split("&"),h=g.length,i=0;h>i;i++)c=g[i].split("="),d=a.decodeQuery(c.shift()),e=c.length?a.decodeQuery(c.join("=")):null,f[d]?("string"==typeof f[d]&&(f[d]=[f[d]]),f[d].push(e)):f[d]=e;return f},a.build=function(b){var c="";return b.protocol&&(c+=b.protocol+":"),b.urn||!c&&!b.hostname||(c+="//"),c+=a.buildAuthority(b)||"","string"==typeof b.path&&("/"!==b.path[0]&&"string"==typeof b.hostname&&(c+="/"),c+=b.path),"string"==typeof b.query&&b.query&&(c+="?"+b.query),"string"==typeof b.fragment&&b.fragment&&(c+="#"+b.fragment),c},a.buildHost=function(b){var c="";return b.hostname?(a.ip6_expression.test(b.hostname)?c+=b.port?"["+b.hostname+"]:"+b.port:b.hostname:(c+=b.hostname,b.port&&(c+=":"+b.port)),c):""},a.buildAuthority=function(b){return a.buildUserinfo(b)+a.buildHost(b)},a.buildUserinfo=function(b){var c="";return b.username&&(c+=a.encode(b.username),b.password&&(c+=":"+a.encode(b.password)),c+="@"),c},a.buildQuery=function(b,d){var e,f,h,i,j="";for(f in b)if(g.call(b,f)&&f)if(c(b[f]))for(e={},h=0,i=b[f].length;i>h;h++)void 0!==b[f][h]&&void 0===e[b[f][h]+""]&&(j+="&"+a.buildQueryParameter(f,b[f][h]),d!==!0&&(e[b[f][h]+""]=!0));else void 0!==b[f]&&(j+="&"+a.buildQueryParameter(f,b[f]));return j.substring(1)},a.buildQueryParameter=function(b,c){return a.encodeQuery(b)+(null!==c?"="+a.encodeQuery(c):"")},a.addQuery=function(b,d,e){if("object"==typeof d)for(var f in d)g.call(d,f)&&a.addQuery(b,f,d[f]);else{if("string"!=typeof d)throw new TypeError("URI.addQuery() accepts an object, string as the name parameter");if(void 0===b[d])return b[d]=e,void 0;"string"==typeof b[d]&&(b[d]=[b[d]]),c(e)||(e=[e]),b[d]=b[d].concat(e)}},a.removeQuery=function(b,e,f){var h,i,j;if(c(e))for(h=0,i=e.length;i>h;h++)b[e[h]]=void 0;else if("object"==typeof e)for(j in e)g.call(e,j)&&a.removeQuery(b,j,e[j]);else{if("string"!=typeof e)throw new TypeError("URI.addQuery() accepts an object, string as the first parameter");void 0!==f?b[e]===f?b[e]=void 0:c(b[e])&&(b[e]=d(b[e],f)):b[e]=void 0}},a.commonPath=function(a,b){var c,d=Math.min(a.length,b.length);for(c=0;d>c;c++)if(a[c]!==b[c]){c--;break}return 1>c?a[0]===b[0]&&"/"===a[0]?"/":"":("/"!==a[c]&&(c=a.substring(0,c).lastIndexOf("/")),a.substring(0,c+1))},a.withinString=function(b,c){return b.replace(a.find_uri_expression,c)},a.ensureValidHostname=function(b){if(b.match(a.invalid_hostname_characters)){if(!punycode)throw new TypeError("Hostname '"+b+"' contains characters other than [A-Z0-9.-] and Punycode.js is not available");if(punycode.toASCII(b).match(a.invalid_hostname_characters))throw new TypeError("Hostname '"+b+"' contains characters other than [A-Z0-9.-]")}},f.build=function(b){return b===!0?this._deferred_build=!0:(void 0===b||this._deferred_build)&&(this._string=a.build(this._parts),this._deferred_build=!1),this},f.clone=function(){return new a(this)},f.toString=function(){return this.build(!1)._string},f.valueOf=function(){return this.toString()},i={protocol:"protocol",username:"username",password:"password",hostname:"hostname",port:"port"},j=function(a){return function(b,c){return void 0===b?this._parts[a]||"":(this._parts[a]=b,this.build(!c),this)}};for(h in i)f[h]=j(i[h]);i={query:"?",fragment:"#"},j=function(a,b){return function(c,d){return void 0===c?this._parts[a]||"":(null!==c&&(c+="",c[0]===b&&(c=c.substring(1))),this._parts[a]=c,this.build(!d),this)}};for(h in i)f[h]=j(h,i[h]);i={search:["?","query"],hash:["#","fragment"]},j=function(a,b){return function(c,d){var e=this[a](c,d);return"string"==typeof e&&e.length?b+e:e}};for(h in i)f[h]=j(i[h][1],i[h][0]);f.pathname=function(b,c){if(void 0===b||b===!0){var d=this._parts.path||(this._parts.urn?"":"/");return b?a.decodePath(d):d}return this._parts.path=b?a.recodePath(b):"/",this.build(!c),this},f.path=f.pathname,f.href=function(b,c){if(void 0===b)return this.toString();this._string="",this._parts={protocol:null,username:null,password:null,hostname:null,urn:null,port:null,path:null,query:null,fragment:null,duplicateQueryParameters:a.duplicateQueryParameters};var d,e=b instanceof a,f="object"==typeof b&&(b.hostname||b.path);if(!e&&f&&"[object Object]"!==Object.prototype.toString.call(b)&&(b=b.toString()),"string"==typeof b)this._parts=a.parse(b,this._parts);else{if(!e&&!f)throw new TypeError("invalid input");var h=e?b._parts:b;for(d in h)g.call(this._parts,d)&&(this._parts[d]=h[d])}return this.build(!c),this},f.is=function(b){var c=!1,d=!1,e=!1,f=!1,g=!1,h=!1,i=!1,j=!this._parts.urn;switch(this._parts.hostname&&(j=!1,d=a.ip4_expression.test(this._parts.hostname),e=a.ip6_expression.test(this._parts.hostname),c=d||e,f=!c,g=f&&SLD&&SLD.has(this._parts.hostname),h=f&&a.idn_expression.test(this._parts.hostname),i=f&&a.punycode_expression.test(this._parts.hostname)),b.toLowerCase()){case"relative":return j;case"absolute":return!j;case"domain":case"name":return f;case"sld":return g;case"ip":return c;case"ip4":case"ipv4":case"inet4":return d;case"ip6":case"ipv6":case"inet6":return e;case"idn":return h;case"url":return!this._parts.urn;case"urn":return!!this._parts.urn;case"punycode":return i}return null};var k=f.protocol,l=f.port,m=f.hostname;f.protocol=function(a,b){if(void 0!==a&&a&&(a=a.replace(/:(\/\/)?$/,""),a.match(/[^a-zA-z0-9\.+-]/)))throw new TypeError("Protocol '"+a+"' contains characters other than [A-Z0-9.+-]");return k.call(this,a,b)},f.scheme=f.protocol,f.port=function(a,b){if(this._parts.urn)return void 0===a?"":this;if(void 0!==a&&(0===a&&(a=null),a&&(a+="",":"===a[0]&&(a=a.substring(1)),a.match(/[^0-9]/))))throw new TypeError("Port '"+a+"' contains characters other than [0-9]");return l.call(this,a,b)},f.hostname=function(b,c){if(this._parts.urn)return void 0===b?"":this;if(void 0!==b){var d={};a.parseHost(b,d),b=d.hostname}return m.call(this,b,c)},f.host=function(b,c){return this._parts.urn?void 0===b?"":this:void 0===b?this._parts.hostname?a.buildHost(this._parts):"":(a.parseHost(b,this._parts),this.build(!c),this)},f.authority=function(b,c){return this._parts.urn?void 0===b?"":this:void 0===b?this._parts.hostname?a.buildAuthority(this._parts):"":(a.parseAuthority(b,this._parts),this.build(!c),this)},f.userinfo=function(b,c){if(this._parts.urn)return void 0===b?"":this;if(void 0===b){if(!this._parts.username)return"";var d=a.buildUserinfo(this._parts);return d.substring(0,d.length-1)}return"@"!==b[b.length-1]&&(b+="@"),a.parseUserinfo(b,this._parts),this.build(!c),this},f.resource=function(b,c){var d;return void 0===b?this.path()+this.search()+this.hash():(d=a.parse(b),this._parts.path=d.path,this._parts.query=d.query,this._parts.fragment=d.fragment,this.build(!c),this)},f.subdomain=function(c,d){if(this._parts.urn)return void 0===c?"":this;if(void 0===c){if(!this._parts.hostname||this.is("IP"))return"";var e=this._parts.hostname.length-this.domain().length-1;return this._parts.hostname.substring(0,e)||""}var f=this._parts.hostname.length-this.domain().length,g=this._parts.hostname.substring(0,f),h=new RegExp("^"+b(g));return c&&"."!==c[c.length-1]&&(c+="."),c&&a.ensureValidHostname(c),this._parts.hostname=this._parts.hostname.replace(h,c),this.build(!d),this},f.domain=function(c,d){if(this._parts.urn)return void 0===c?"":this;if("boolean"==typeof c&&(d=c,c=void 0),void 0===c){if(!this._parts.hostname||this.is("IP"))return"";var e=this._parts.hostname.match(/\./g);if(e&&e.length<2)return this._parts.hostname;var f=this._parts.hostname.length-this.tld(d).length-1;return f=this._parts.hostname.lastIndexOf(".",f-1)+1,this._parts.hostname.substring(f)||""}if(!c)throw new TypeError("cannot set domain empty");if(a.ensureValidHostname(c),!this._parts.hostname||this.is("IP"))this._parts.hostname=c;else{var g=new RegExp(b(this.domain())+"$");this._parts.hostname=this._parts.hostname.replace(g,c)}return this.build(!d),this},f.tld=function(a,c){if(this._parts.urn)return void 0===a?"":this;if("boolean"==typeof a&&(c=a,a=void 0),void 0===a){if(!this._parts.hostname||this.is("IP"))return"";var d=this._parts.hostname.lastIndexOf("."),e=this._parts.hostname.substring(d+1);return c!==!0&&SLD&&SLD.list[e.toLowerCase()]?SLD.get(this._parts.hostname)||e:e}var f;if(!a)throw new TypeError("cannot set TLD empty");if(a.match(/[^a-zA-Z0-9-]/)){if(!SLD||!SLD.is(a))throw new TypeError("TLD '"+a+"' contains characters other than [A-Z0-9]");f=new RegExp(b(this.tld())+"$"),this._parts.hostname=this._parts.hostname.replace(f,a)}else{if(!this._parts.hostname||this.is("IP"))throw new ReferenceError("cannot set TLD on non-domain host");f=new RegExp(b(this.tld())+"$"),this._parts.hostname=this._parts.hostname.replace(f,a)}return this.build(!c),this},f.directory=function(c,d){if(this._parts.urn)return void 0===c?"":this;if(void 0===c||c===!0){if(!this._parts.path&&!this._parts.hostname)return"";if("/"===this._parts.path)return"/";var e=this._parts.path.length-this.filename().length-1,f=this._parts.path.substring(0,e)||(this._parts.hostname?"/":"");return c?a.decodePath(f):f}var g=this._parts.path.length-this.filename().length,h=this._parts.path.substring(0,g),i=new RegExp("^"+b(h));return this.is("relative")||(c||(c="/"),"/"!==c[0]&&(c="/"+c)),c&&"/"!==c[c.length-1]&&(c+="/"),c=a.recodePath(c),this._parts.path=this._parts.path.replace(i,c),this.build(!d),this},f.filename=function(c,d){if(this._parts.urn)return void 0===c?"":this;if(void 0===c||c===!0){if(!this._parts.path||"/"===this._parts.path)return"";var e=this._parts.path.lastIndexOf("/"),f=this._parts.path.substring(e+1);return c?a.decodePathSegment(f):f}var g=!1;"/"===c[0]&&(c=c.substring(1)),c.match(/\.?\//)&&(g=!0);var h=new RegExp(b(this.filename())+"$");return c=a.recodePath(c),this._parts.path=this._parts.path.replace(h,c),g?this.normalizePath(d):this.build(!d),this},f.suffix=function(c,d){if(this._parts.urn)return void 0===c?"":this;if(void 0===c||c===!0){if(!this._parts.path||"/"===this._parts.path)return"";var e,f,g=this.filename(),h=g.lastIndexOf(".");return-1===h?"":(e=g.substring(h+1),f=/^[a-z0-9%]+$/i.test(e)?e:"",c?a.decodePathSegment(f):f)}"."===c[0]&&(c=c.substring(1));var i,j=this.suffix();if(j)i=c?new RegExp(b(j)+"$"):new RegExp(b("."+j)+"$");else{if(!c)return this;this._parts.path+="."+a.recodePath(c)}return i&&(c=a.recodePath(c),this._parts.path=this._parts.path.replace(i,c)),this.build(!d),this},f.segment=function(a,b,d){var e=this._parts.urn?":":"/",f=this.path(),g="/"===f.substring(0,1),h=f.split(e);if("number"!=typeof a&&(d=b,b=a,a=void 0),void 0!==a&&"number"!=typeof a)throw new Error("Bad segment '"+a+"', must be 0-based integer");return g&&h.shift(),0>a&&(a=Math.max(h.length+a,0)),void 0===b?void 0===a?h:h[a]:(null===a||void 0===h[a]?c(b)?h=b:(b||"string"==typeof b&&b.length)&&(""===h[h.length-1]?h[h.length-1]=b:h.push(b)):b||"string"==typeof b&&b.length?h[a]=b:h.splice(a,1),g&&h.unshift(""),this.path(h.join(e),d))};var n=f.query;return f.query=function(b,c){return b===!0?a.parseQuery(this._parts.query):void 0!==b&&"string"!=typeof b?(this._parts.query=a.buildQuery(b,this._parts.duplicateQueryParameters),this.build(!c),this):n.call(this,b,c)},f.addQuery=function(b,c,d){var e=a.parseQuery(this._parts.query);return a.addQuery(e,b,void 0===c?null:c),this._parts.query=a.buildQuery(e,this._parts.duplicateQueryParameters),"string"!=typeof b&&(d=c),this.build(!d),this},f.removeQuery=function(b,c,d){var e=a.parseQuery(this._parts.query);return a.removeQuery(e,b,c),this._parts.query=a.buildQuery(e,this._parts.duplicateQueryParameters),"string"!=typeof b&&(d=c),this.build(!d),this},f.addSearch=f.addQuery,f.removeSearch=f.removeQuery,f.normalize=function(){return this._parts.urn?this.normalizeProtocol(!1).normalizeQuery(!1).normalizeFragment(!1).build():this.normalizeProtocol(!1).normalizeHostname(!1).normalizePort(!1).normalizePath(!1).normalizeQuery(!1).normalizeFragment(!1).build()},f.normalizeProtocol=function(a){return"string"==typeof this._parts.protocol&&(this._parts.protocol=this._parts.protocol.toLowerCase(),this.build(!a)),this},f.normalizeHostname=function(a){return this._parts.hostname&&(this.is("IDN")&&punycode?this._parts.hostname=punycode.toASCII(this._parts.hostname):this.is("IPv6")&&IPv6&&(this._parts.hostname=IPv6.best(this._parts.hostname)),this._parts.hostname=this._parts.hostname.toLowerCase(),this.build(!a)),this},f.normalizePort=function(b){return"string"==typeof this._parts.protocol&&this._parts.port===a.defaultPorts[this._parts.protocol]&&(this._parts.port=null,this.build(!b)),this},f.normalizePath=function(b){if(this._parts.urn)return this;if(!this._parts.path||"/"===this._parts.path)return this;var c,d,e,f,g=this._parts.path;for("/"!==g[0]&&("."===g[0]&&(d=g.substring(0,g.indexOf("/"))),c=!0,g="/"+g),g=g.replace(/(\/(\.\/)+)|\/{2,}/g,"/");;){if(e=g.indexOf("/../"),-1===e)break;if(0===e){g=g.substring(3);break}f=g.substring(0,e).lastIndexOf("/"),-1===f&&(f=e),g=g.substring(0,f)+g.substring(e+3)}return c&&this.is("relative")&&(g=d?d+g:g.substring(1)),g=a.recodePath(g),this._parts.path=g,this.build(!b),this},f.normalizePathname=f.normalizePath,f.normalizeQuery=function(b){return"string"==typeof this._parts.query&&(this._parts.query.length?this.query(a.parseQuery(this._parts.query)):this._parts.query=null,this.build(!b)),this},f.normalizeFragment=function(a){return this._parts.fragment||(this._parts.fragment=null,this.build(!a)),this},f.normalizeSearch=f.normalizeQuery,f.normalizeHash=f.normalizeFragment,f.iso8859=function(){var b=a.encode,c=a.decode;return a.encode=escape,a.decode=decodeURIComponent,this.normalize(),a.encode=b,a.decode=c,this},f.unicode=function(){var b=a.encode,c=a.decode;return a.encode=e,a.decode=unescape,this.normalize(),a.encode=b,a.decode=c,this},f.readable=function(){var b=this.clone();b.username("").password("").normalize();var c="";if(b._parts.protocol&&(c+=b._parts.protocol+"://"),b._parts.hostname&&(b.is("punycode")&&punycode?(c+=punycode.toUnicode(b._parts.hostname),b._parts.port&&(c+=":"+b._parts.port)):c+=b.host()),b._parts.hostname&&b._parts.path&&"/"!==b._parts.path[0]&&(c+="/"),c+=b.path(!0),b._parts.query){for(var d="",e=0,f=b._parts.query.split("&"),g=f.length;g>e;e++){var h=(f[e]||"").split("=");d+="&"+a.decodeQuery(h[0]).replace(/&/g,"%26"),void 0!==h[1]&&(d+="="+a.decodeQuery(h[1]).replace(/&/g,"%26"))}c+="?"+d.substring(1)}return c+=b.hash()},f.absoluteTo=function(b){var c,d,e,f=this.clone(),g=["protocol","username","password","hostname","port"];if(this._parts.urn)throw new Error("URNs do not have any generally defined hierachical components");if(this._parts.hostname)return f;for(b instanceof a||(b=new a(b)),d=0,e;e=g[d];d++)f._parts[e]=b._parts[e];for(g=["query","path"],d=0,e;e=g[d];d++)!f._parts[e]&&b._parts[e]&&(f._parts[e]=b._parts[e]);return"/"!==f.path()[0]&&(c=b.directory(),f._parts.path=(c?c+"/":"")+f._parts.path,f.normalizePath()),f.build(),f},f.relativeTo=function(c){var d,e,f=this.clone(),g=["protocol","username","password","hostname","port"];if(this._parts.urn)throw new Error("URNs do not have any generally defined hierachical components");if(c instanceof a||(c=new a(c)),"/"!==this.path()[0]||"/"!==c.path()[0])throw new Error("Cannot calculate common path from non-relative URLs");d=a.commonPath(f.path(),c.path()),e=c.directory();for(var h,i=0;h=g[i];i++)f._parts[h]=null;if(!d||"/"===d)return f;if(e+"/"===d)f._parts.path="./"+f.filename();else{for(var j="../",k=new RegExp("^"+b(d)),l=e.replace(k,"/").match(/\//g).length-1;l--;)j+="../";f._parts.path=f._parts.path.replace(k,j)}return f.build(),f},f.equals=function(b){var d,e,f,h=this.clone(),i=new a(b),j={},k={},l={};if(h.normalize(),i.normalize(),h.toString()===i.toString())return!0;if(d=h.query(),e=i.query(),h.query(""),i.query(""),h.toString()!==i.toString())return!1;if(d.length!==e.length)return!1;j=a.parseQuery(d),k=a.parseQuery(e);for(f in j)if(g.call(j,f)){if(c(j[f])){if(!c(k[f]))return!1;if(j[f].length!==k[f].length)return!1;j[f].sort(),k[f].sort();for(var m=0,n=j[f].length;n>m;m++)if(j[f][m]!==k[f][m])return!1}else if(j[f]!==k[f])return!1;l[f]=!0}for(f in k)if(g.call(k,f)&&!l[f])return!1;return!0},f.duplicateQueryParameters=function(a){return this._parts.duplicateQueryParameters=!!a,this},a}),define("kirin/report/1.0.0/biz/custom-menu",["$","atip","tip","popup","overlay","position","iframe-shim","widget","base","arale/widget/1.0.3/templatable","handlebars","kirin/report/1.0.0/biz/custom-menu-tpl"],function(a,b,c){function d(a){return a.replace(/(\-[a-z])/g,function(a){return a.toUpperCase().replace("-","")})}function e(a){var b,c=[],e=a[0].options,g=e.length;for(b=0;g>b;b++){for(var h={},i=f(e[b]),k=0,l=j.length;l>k;k++){var m=j[k],n=i.attr(m);void 0!==n&&(h[d(m)]=n)}h.text=i.text(),h.index=b,h.specialClass=0==b?"first":b==g-1?"last":"",c.push(h)}return c}var f=a("$"),g=a("atip"),h=a("popup"),i=a("arale/widget/1.0.3/templatable"),j=["data-tip","data-link","data-target","data-action","disabled","class","seed","data-fund-change"],k=h.extend({Implements:[i],attrs:{select:{setter:function(a){return f(a)}},classPrefix:{value:"custom-menu",setter:function(a){return this.model.classPrefix=a,a}}},template:a("kirin/report/1.0.0/biz/custom-menu-tpl"),initAttrs:function(){k.superclass.initAttrs.apply(this,[].slice.call(arguments,0)),this.model={options:e(this.get("select")),classPrefix:this.get("classPrefix")}},setup:function(){k.superclass.setup.apply(this,[].slice.call(arguments,0));var a=this,b=f("li:first a",this.element).text();f("span:first",this.get("trigger")).text(b),"详情"!==b&&"退款"!==b&&"备注"!==b&&this.get("trigger").addClass("operation-menu-trigger-hot");var c=function(){var a=document.createElement("span");a.innerHTML="字",document.body.appendChild(a);var b=a.offsetWidth;return document.body.removeChild(a),b}(),e=f("ul li",this.element),h=-1;e.each(function(a,b){b=f(b);var c=f.trim(b.text()).length;c>h&&(h=c)});var i=h*c+28;this.element.width(i),f.each(this.model.options,function(b,c){var e=c[d("data-tip")];e&&new g({trigger:f("li",a.element).get(b),content:e,arrowPosition:2,theme:"blue",width:212,delay:-1})})},events:{"mouseenter li":function(a){var b=f(a.target);b.is("li")||(b=b.parents("li")),b.addClass("hover")},"mouseleave li":function(a){var b=f(a.target);b.is("li")||(b=b.parents("li")),b.removeClass("hover")},"click li a[data-action]":function(a){a.preventDefault();var b=f(a.target);this.trigger("action:"+b.attr("data-action"),b)},"click li a[disabled]":function(a){a.preventDefault()}}});c.exports=k}),define("kirin/report/1.0.0/biz/custom-menu-tpl",["handlebars"],function(a,b,c){var d=a("handlebars");!function(){var a=d.template;d.templates=d.templates||{},c.exports=a(function(a,b,c,d,e){function f(a,b,d){var e,f,o,p="";return p+='\n            <li class="'+s((e=d.classPrefix,typeof e===r?e.apply(a):e))+"-item ",(f=c.specialClass)?f=f.call(a,{hash:{},data:b}):(f=a.specialClass,f=typeof f===r?f.apply(a):f),p+=s(f)+" ",(f=c["class"])?f=f.call(a,{hash:{},data:b}):(f=a["class"],f=typeof f===r?f.apply(a):f),p+=s(f)+" ",o={hash:{},inverse:t.noop,fn:t.program(2,g,b),data:b},(f=c.disabled)?f=f.call(a,o):(f=a.disabled,f=typeof f===r?f.apply(a):f),c.disabled||(f=u.call(a,f,o)),(f||0===f)&&(p+=f),p+='">\n                <a href="',o={hash:{},inverse:t.noop,fn:t.programWithDepth(h,b,a),data:b},(f=c.dataLink)?f=f.call(a,o):(f=a.dataLink,f=typeof f===r?f.apply(a):f),c.dataLink||(f=u.call(a,f,o)),(f||0===f)&&(p+=f),o={hash:{},inverse:t.program(6,i,b),fn:t.noop,data:b},(f=c.dataLink)?f=f.call(a,o):(f=a.dataLink,f=typeof f===r?f.apply(a):f),c.dataLink||(f=u.call(a,f,o)),(f||0===f)&&(p+=f),p+='"\n                    ',o={hash:{},inverse:t.noop,fn:t.programWithDepth(j,b,a),data:b},(f=c.dataTarget)?f=f.call(a,o):(f=a.dataTarget,f=typeof f===r?f.apply(a):f),c.dataTarget||(f=u.call(a,f,o)),(f||0===f)&&(p+=f),p+="\n                    ",o={hash:{},inverse:t.noop,fn:t.program(2,g,b),data:b},(f=c.disabled)?f=f.call(a,o):(f=a.disabled,f=typeof f===r?f.apply(a):f),c.disabled||(f=u.call(a,f,o)),(f||0===f)&&(p+=f),p+="\n                    ",o={hash:{},inverse:t.noop,fn:t.program(10,k,b),data:b},(f=c.dataFundChange)?f=f.call(a,o):(f=a.dataFundChange,f=typeof f===r?f.apply(a):f),c.dataFundChange||(f=u.call(a,f,o)),(f||0===f)&&(p+=f),p+="\n                    ",o={hash:{},inverse:t.noop,fn:t.programWithDepth(l,b,a),data:b},(f=c.dataTip)?f=f.call(a,o):(f=a.dataTip,f=typeof f===r?f.apply(a):f),c.dataTip||(f=u.call(a,f,o)),(f||0===f)&&(p+=f),p+="\n                    ",o={hash:{},inverse:t.noop,fn:t.programWithDepth(m,b,a),data:b},(f=c.seed)?f=f.call(a,o):(f=a.seed,f=typeof f===r?f.apply(a):f),c.seed||(f=u.call(a,f,o)),(f||0===f)&&(p+=f),p+="\n                    ",o={hash:{},inverse:t.noop,fn:t.programWithDepth(n,b,a),data:b},(f=c.dataAction)?f=f.call(a,o):(f=a.dataAction,f=typeof f===r?f.apply(a):f),c.dataAction||(f=u.call(a,f,o)),(f||0===f)&&(p+=f),p+=">",(f=c.text)?f=f.call(a,{hash:{},data:b}):(f=a.text,f=typeof f===r?f.apply(a):f),p+=s(f)+"</a>\n            </li>\n        "}function g(){return"disabled"}function h(a,b,c){var d;return s((d=c.dataLink,typeof d===r?d.apply(a):d))}function i(){return"#"}function j(a,b,c){var d,e="";return e+='target="'+s((d=c.dataTarget,typeof d===r?d.apply(a):d))+'"'}function k(){return'data-fund-change="true"'}function l(a,b,c){var d,e="";return e+='data-tip="'+s((d=c.dataTip,typeof d===r?d.apply(a):d))+'"'}function m(a,b,c){var d,e="";return e+='seed="'+s((d=c.seed,typeof d===r?d.apply(a):d))+'"'}function n(a,b,c){var d,e="";return e+='data-action="'+s((d=c.dataAction,typeof d===r?d.apply(a):d))+'"'}this.compilerInfo=[2,">= 1.0.0-rc.3"],c=c||a.helpers,e=e||{};var o,p,q="",r="function",s=this.escapeExpression,t=this,u=c.blockHelperMissing;return q+='<div class="',(o=c.classPrefix)?o=o.call(b,{hash:{},data:e}):(o=b.classPrefix,o=typeof o===r?o.apply(b):o),q+=s(o)+'">\n    <ul>\n        ',p={hash:{},inverse:t.noop,fn:t.programWithDepth(f,e,b),data:e},(o=c.options)?o=o.call(b,p):(o=b.options,o=typeof o===r?o.apply(b):o),c.options||(o=u.call(b,o,p)),(o||0===o)&&(q+=o),q+="\n    </ul>\n</div>\n"})}()}),define("kirin/report/1.0.0/biz/top-tip",["overlay","$","position","iframe-shim","widget","base"],function(a,b){var c=a("overlay"),d=a("$"),e={delay:2e3,type:"success"};b.show=function(a,b){var f={};if(d.extend(f,e,b),!a)throw new Error("message required.");var g=new c({template:'<div class="ui-tiptext-container ui-tiptext-container-'+f.type+'" style="padding:6px 15px;position:fixed">'+'<p class="ui-tiptext" style="padding:0;float:left;">'+a+"</p>"+"</div>",align:{selfXY:["50%",0],baseXY:["50%",0]}});g.show(),setTimeout(function(){g.hide(),g.destroy()},f.delay)}});
