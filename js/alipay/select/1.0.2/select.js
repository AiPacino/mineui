define("alipay/select/1.0.2/select",["arale/overlay/1.0.0/overlay","$","arale/position/1.0.0/position","arale/iframe-shim/1.0.0/iframe-shim","arale/widget/1.0.3/widget","arale/base/1.0.1/base","arale/class/1.0.0/class","arale/events/1.0.0/events","arale/widget/1.0.3/templatable","gallery/handlebars/1.0.0/handlebars","./select-tpl"],function(a,b,c){function d(a,b){var c,d=[],e=a.options,f=e.length,g=!1;for(c=0;f>c;c++){var h,i={},j=e[c],k=["text","value","defaultSelected","selected","disabled"];for(h in k){var l=k[h];i[l]=j[l]}i.defaultSelected=j.defaultSelected?"true":"false",j.selected?(i.selected="true",g=!0):i.selected="false",d.push(i)}return g||(newModel[0].selected="true"),{options:d,classPrefix:b}}function e(a,b,c){var d,f,g,h,i=[],j=!1;for(c||(c=[],j=!0),d=0,g=a.length;g>d;d++){var k=a[d];k.selected?(k.selected=k.defaultSelected="true",c.push(k)):k.selected=k.defaultSelected="false",k.options&&k.options.length>0&&(k.options=e(k.options,b,c).options),i.push(k)}if(j)if(c.length>0)for(c.pop(),f=0,h=c.length;h>f;f++)c[f].selected="false";else i[0].selected="true";return{options:i,classPrefix:b}}function f(a,b,c){var d;if(k.isNumeric(a))d=a;else{if(a=b.parent().find(a),0==a.length)return c?[]:-1;d=b.index(a)}if(0>d){k.each(b,function(b,c){return c=k(c),c.find(a).length>0?(d=b,!1):void 0});var e=f(a,b.eq(d).children("ul").children(),!0);return e instanceof Array||(e=[e]),[d].concat(e)}return c?[d]:d}function g(a,b){var c,d=a instanceof Array?a:[a];return k.each(d,function(a,d){c=b.eq(d),b=k("ul",c).children()}),c}function h(a,b){if(-1==a)return null;var c,d=a instanceof Array?a:[a];return k.each(d,function(a,d){c=b[d],b=c.options}),c}function i(a){var b=!1;return k.each(a,function(a,c){return k.isArray(c.options)&&c.options.length>0?(b=!0,!1):void 0}),b}var j=a("arale/overlay/1.0.0/overlay"),k=a("$"),l=a("arale/widget/1.0.3/templatable"),m=a("./select-tpl"),n=j.extend({Implements:l,attrs:{trigger:{value:null,getter:function(a){return k(a).eq(0)}},classPrefix:"ui-select",template:m,align:{baseXY:[0,"100%-1px"]},renderTrigger:function(a){a=a.clone(),k("ul",a).remove();var b=k.trim(a.html());return a.remove(),b},name:"",value:"",length:0,selectedIndex:-1,multiple:!1,disabled:!1,selectSource:null},events:{"click [data-role=item]":function(a){a.stopPropagation();var b=k(a.currentTarget);"true"!=b.attr("data-disabled")&&this.select(b)},"mouseenter [data-role=item]":function(a){k(a.currentTarget).addClass(this.get("classPrefix")+"-item-hover");var b=k(a.currentTarget).data("sub-overlay");b&&b._setPosition().show()},"mouseleave [data-role=item]":function(a){k(a.currentTarget).removeClass(this.get("classPrefix")+"-item-hover");var b=k(a.currentTarget).data("sub-overlay");b&&b.hide()}},initAttrs:function(a,b){n.superclass.initAttrs.call(this,a,b);var c=this.get("trigger");if("select"==c[0].tagName.toLowerCase()){var f=c.attr("name");f&&this.set("name",f),this.set("selectSource",c);var g='<a href="#" class="'+this.get("classPrefix")+'-trigger"></a>',h=k(g);this.set("trigger",h),c.after(h).hide(),this.model=d(c[0],this.get("classPrefix"))}else{var f=this.get("name");if(f){var i=k("input[name="+f+"]").eq(0);i[0]||(i=k('<input type="hidden" id="select-'+f+'" name="'+f+'" />').insertBefore(c)),this.set("selectSource",i)}this.model=e(this.model,this.get("classPrefix"))}},setup:function(){var a=this,b=this.get("trigger").on("click",{self:this},this._trigger_click).on("mouseenter",function(){b.addClass(a.get("classPrefix")+"-trigger-hover")}).on("mouseleave",function(){b.removeClass(a.get("classPrefix")+"-trigger-hover")});if(this.options=this.$("[data-role=content]").children(),this.set("multiple",i(this.model.options)),k("[data-selected=true]",this.element).is(k("[data-disabled=true]",this.element)))throw new Error("A disabled item cannot be selected, check your model.");this.select("[data-selected=true]"),this.set("length",this.options.length),this._tweakAlignDefaultValue(),this._blurHide(b),this._initSubSelectPosition(),n.superclass.setup.call(this)},render:function(){return n.superclass.render.call(this),this._setTriggerWidth(),this},show:function(){return n.superclass.show.call(this),this},_setTriggerWidth:function(){var a=this.get("trigger"),b=this.element.outerWidth(),c=parseInt(a.css("padding-left"),10),d=parseInt(a.css("padding-right"),10),e=parseInt(a.css("border-left-width"),10),f=parseInt(a.css("border-right-width"),10);a.css("width",b-c-d-e-f)},_tweakAlignDefaultValue:function(){var a=this.get("align");"VIEWPORT"===a.baseElement._id&&(a.baseElement=this.get("trigger")),this.set("align",a)},_trigger_click:function(a){var b=a.data.self;a.preventDefault(),b.get("disabled")||b.show()},destroy:function(){k.each(this._overlays,function(a,b){b.element&&b.destroy()}),n.superclass.destroy.call(this)},select:function(a){var b=f(a,this.options,this.get("multiple")),c=this.get("selectedIndex");if(this.set("selectedIndex",b),c!==b){var d=g(b,this.options);this.trigger("change",d)}return this.hide(),this},syncModel:function(a){return this.model=e(a,this.get("classPrefix")),this.set("multiple",i(this.model.options)),this.renderPartial("[data-role=content]"),this.options=this.$("[data-role=content]").children(),this.set("length",this.options.length),this.set("selectedIndex",-1),this.set("value",""),this.select("[data-selected=true]"),this._setTriggerWidth(),this},getOption:function(a){var b=f(a,this.options,this.get("multiple"));return g(b,this.options)},addOption:function(a){var b=this.model.options;return b.push(a),this.syncModel(b),this},removeOption:function(a){var b=f(a,this.options,this.get("multiple")),c=this.get("selectedIndex"),d=g(b,this.options);return d.remove(),this.options=this.$("[data-role=content]").children(),this.set("length",this.options.length),b===c?this.set("selectedIndex",0):c>b&&this.set("selectedIndex",c-1),this},_onRenderSelectedIndex:function(a){if(-1!=a){var b=g(a,this.options),c=this.currentItem,d=b.attr("data-value");if(!c||b[0]!=c[0]){if(c&&this.element.has(c)){c.attr("data-selected","false").removeClass(this.get("classPrefix")+"-item-selected");var e=h(f(c,this.options,this.get("multiple")),this.model.options);e&&(e.selected="false")}b.attr("data-selected","true").addClass(this.get("classPrefix")+"-item-selected");var e=h(a,this.model.options);e.selected="true",this.set("value",d);var i=this.get("trigger"),j=i.find("[data-role=trigger-content]"),l=this.get("renderTrigger").call(this,b);j.length?j.html(l):i.html(l);var m=this.get("selectSource");if(m){var n=m.val();m.val(d),d!==n&&k(m).trigger("change")}this.currentItem=b}}},_onRenderDisabled:function(a){var b=this.get("classPrefix")+"-disabled",c=this.get("trigger");c[a?"addClass":"removeClass"](b)},_initSubSelectPosition:function(){this._overlays=[];var a=k("li[data-role=item]",this.element),b=this;a.each(function(a,c){c=k(c);var d=c.children("ul");if(d.length>0){var e=new j({element:d,align:{baseElement:c,baseXY:["100%",0],selfXY:[0,0]}});c.data("sub-overlay",e),b._overlays.push(e)}})}});c.exports=n}),define("alipay/select/1.0.2/select-tpl",["gallery/handlebars/1.0.0/handlebars"],function(a,b,c){var d=a("gallery/handlebars/1.0.0/handlebars");!function(){var a=d.template;d.templates=d.templates||{},c.exports=a(function(a,b,c,d,e){function f(a,b,d){var e,f,i="";return i+='\n        <li data-role="item" class="'+q((e=d.classPrefix,typeof e===p?e.apply(a):e))+"-item ",f=c["if"].call(a,a.disabled,{hash:{},inverse:r.noop,fn:r.programWithDepth(g,b,d),data:b}),(f||0===f)&&(i+=f),i+='" data-value="',(f=c.value)?f=f.call(a,{hash:{},data:b}):(f=a.value,f=typeof f===p?f.apply(a):f),i+=q(f)+'" data-default-selected="',(f=c.defaultSelected)?f=f.call(a,{hash:{},data:b}):(f=a.defaultSelected,f=typeof f===p?f.apply(a):f),i+=q(f)+'" data-selected="',(f=c.selected)?f=f.call(a,{hash:{},data:b}):(f=a.selected,f=typeof f===p?f.apply(a):f),i+=q(f)+'" data-disabled="',(f=c.disabled)?f=f.call(a,{hash:{},data:b}):(f=a.disabled,f=typeof f===p?f.apply(a):f),i+=q(f)+'">',(f=c.text)?f=f.call(a,{hash:{},data:b}):(f=a.text,f=typeof f===p?f.apply(a):f),(f||0===f)&&(i+=f),i+="\n            ",f=c["if"].call(a,a.options,{hash:{},inverse:r.noop,fn:r.programWithDepth(h,b,d),data:b}),(f||0===f)&&(i+=f),i+="\n        </li>\n        "}function g(a,b,c){var d,e="";return e+=q((d=c.classPrefix,typeof d===p?d.apply(a):d))+"-item-disabled"}function h(a,b,d){var e,f="";return f+='\n                <ul style="display:none">\n                    ',e=c.each.call(a,a.options,{hash:{},inverse:r.noop,fn:r.programWithDepth(i,b,d),data:b}),(e||0===e)&&(f+=e),f+="\n                </ul>\n            "}function i(a,b,d){var e,f,g="";return g+='\n                    <li data-role="item" class="'+q((e=d.classPrefix,typeof e===p?e.apply(a):e))+"-item ",f=c["if"].call(a,a.disabled,{hash:{},inverse:r.noop,fn:r.programWithDepth(j,b,d),data:b}),(f||0===f)&&(g+=f),g+='" data-value="',(f=c.value)?f=f.call(a,{hash:{},data:b}):(f=a.value,f=typeof f===p?f.apply(a):f),g+=q(f)+'" data-default-selected="',(f=c.defaultSelected)?f=f.call(a,{hash:{},data:b}):(f=a.defaultSelected,f=typeof f===p?f.apply(a):f),g+=q(f)+'" data-selected="',(f=c.selected)?f=f.call(a,{hash:{},data:b}):(f=a.selected,f=typeof f===p?f.apply(a):f),g+=q(f)+'" data-disabled="',(f=c.disabled)?f=f.call(a,{hash:{},data:b}):(f=a.disabled,f=typeof f===p?f.apply(a):f),g+=q(f)+'">',(f=c.text)?f=f.call(a,{hash:{},data:b}):(f=a.text,f=typeof f===p?f.apply(a):f),(f||0===f)&&(g+=f),g+="\n                        ",f=c["if"].call(a,a.options,{hash:{},inverse:r.noop,fn:r.programWithDepth(k,b,d),data:b}),(f||0===f)&&(g+=f),g+="\n                    </li>\n                    "}function j(a,b,c){var d,e="";return e+=q((d=c.classPrefix,typeof d===p?d.apply(a):d))+"-item-disabled"}function k(a,b,d){var e,f="";return f+='\n                            <ul style="display:none">\n                                ',e=c.each.call(a,a.options,{hash:{},inverse:r.noop,fn:r.programWithDepth(l,b,d),data:b}),(e||0===e)&&(f+=e),f+="\n                            </ul>\n                        "}function l(a,b,d){var e,f,g="";return g+='\n                                <li data-role="item" class="'+q((e=d.classPrefix,typeof e===p?e.apply(a):e))+"-item ",f=c["if"].call(a,a.disabled,{hash:{},inverse:r.noop,fn:r.programWithDepth(m,b,d),data:b}),(f||0===f)&&(g+=f),g+='" data-value="',(f=c.value)?f=f.call(a,{hash:{},data:b}):(f=a.value,f=typeof f===p?f.apply(a):f),g+=q(f)+'" data-default-selected="',(f=c.defaultSelected)?f=f.call(a,{hash:{},data:b}):(f=a.defaultSelected,f=typeof f===p?f.apply(a):f),g+=q(f)+'" data-selected="',(f=c.selected)?f=f.call(a,{hash:{},data:b}):(f=a.selected,f=typeof f===p?f.apply(a):f),g+=q(f)+'" data-disabled=',(f=c.disabled)?f=f.call(a,{hash:{},data:b}):(f=a.disabled,f=typeof f===p?f.apply(a):f),g+=q(f)+">",(f=c.text)?f=f.call(a,{hash:{},data:b}):(f=a.text,f=typeof f===p?f.apply(a):f),(f||0===f)&&(g+=f),g+="</li>\n                                "}function m(a,b,c){var d,e="";return e+=q((d=c.classPrefix,typeof d===p?d.apply(a):d))+"-item-disabled"}this.compilerInfo=[2,">= 1.0.0-rc.3"],c=c||a.helpers,e=e||{};var n,o="",p="function",q=this.escapeExpression,r=this;return o+='<div class="',(n=c.classPrefix)?n=n.call(b,{hash:{},data:e}):(n=b.classPrefix,n=typeof n===p?n.apply(b):n),o+=q(n)+'">\n    <ul class="',(n=c.classPrefix)?n=n.call(b,{hash:{},data:e}):(n=b.classPrefix,n=typeof n===p?n.apply(b):n),o+=q(n)+'-content" data-role="content">\n        ',n=c.each.call(b,b.options,{hash:{},inverse:r.noop,fn:r.programWithDepth(f,e,b),data:e}),(n||0===n)&&(o+=n),o+="\n    </ul>\n</div>\n"})}()});
