define("alipay/common-v1/0.9.5/account",["gallery/jquery/1.7.2/jquery","arale/popup/0.9.6/dropdown","arale/popup/0.9.6/popup","arale/overlay/0.9.8/overlay","arale/position/0.9.2/position","arale/iframe-shim/0.9.3/iframe-shim","arale/widget/0.9.16/widget","arale/base/0.9.16/base","arale/class/0.9.2/class","arale/events/0.9.1/events","arale/base/0.9.16/aspect","arale/base/0.9.16/attribute","arale/widget/0.9.16/daparser","arale/widget/0.9.16/auto-render","gallery/handlebars/1.0.0/handlebars","alipay/xbox/0.9.5/xbox","arale/overlay/0.9.8/mask"],function(e,t,n){function c(e){e=e.replace(/^\s*(.*?)\s*$/g,"$1");var t={regxp:/(^.*)(.{3}$)/g,placeholder:"$1...",leftLimit:11,rightLimit:7,totalLimit:19},n=e.split("@"),r=n[0],i=n[1];return n.length>1&&e.length>t.totalLimit?(r.length>t.leftLimit&&(r=r.slice(0,t.leftLimit).replace(t.regxp,t.placeholder)),i.length>t.rightLimit&&(i=i.slice(0,t.rightLimit).replace(t.regxp,t.placeholder)),[r,"@",i].join("").toLowerCase()):e.toLowerCase()}function h(e){if(e&&e.outerWidth()>147){var t=e.html(),n=c(t);n.length===t.length&&(n=n.slice(0,10)+"..."),e.html(n)}}function d(){return p||(p=(new o({type:"iframe",classPrefix:"global-xbox",isOld:!0,height:"300px"})).render()),p}function v(e,t){var n=0;s.registerHelper("accountContent",function(){var e=c(this),t=f.loginurl+this;if(n++<10)return'<li><a href="'+t+'" class="global-xbox-item" target="_blank" title="'+this+'">'+e+"</a></li>"});var r=s.compile("{{#accts}}{{{accountContent}}}{{/accts}}");t.html(r(e)).removeClass("global-loading")}var r=e("gallery/jquery/1.7.2/jquery"),i=e("arale/popup/0.9.6/dropdown"),s=e("gallery/handlebars/1.0.0/handlebars"),o=e("alipay/xbox/0.9.5/xbox"),u=!1,a=window.GLOBAL||{},f={loginurl:a.system.authcenter+"/login/xbox.htm?loginScene=x&change=true&logonId=",accounturl:a.system.personal+"/home/statusbar/getRelativeAccounts.json?_callback=?"},l=i.extend({events:{"click .global-xbox-item":"changeLogin"},setup:function(){l.superclass.setup.call(this);var e=this.$("#global-username");e.html(c(e.html())),h(this.get("trigger").find("#global-toplink-username"))},show:function(){var e=this.$("#global-users");return e.attr("data-user")==="true"&&!u&&(u=!0,r.ajax(f.accounturl,{dataType:"jsonp"}).success(function(t){if(t.stat!="ok"){u=!1,e.hide();return}u=!0,v(t,e.find("#global-list-user"))}).error(function(){u=!1,e.hide()})),l.superclass.show.call(this)},changeLogin:function(e){e.preventDefault(),d().set("content",e.currentTarget.href).show()}});n.exports=l;var p});
