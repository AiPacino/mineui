define("alipay/common-v1/0.9.5/robot",["gallery/jquery/1.7.2/jquery","arale/widget/0.9.16/templatable","gallery/handlebars/1.0.0/handlebars","arale/widget/0.9.16/ast-printer","arale/popup/0.9.6/dropdown","arale/popup/0.9.6/popup","arale/overlay/0.9.8/overlay","arale/position/0.9.2/position","arale/iframe-shim/0.9.3/iframe-shim","arale/widget/0.9.16/widget","arale/base/0.9.16/base","arale/class/0.9.2/class","arale/events/0.9.1/events","arale/base/0.9.16/aspect","arale/base/0.9.16/attribute","arale/widget/0.9.16/daparser","arale/widget/0.9.16/auto-render"],function(e,t,n){function c(e){var t=0;return e.isComplete&&(t+=20),e.isBindedMobile&&(t+=20),e.isCertified&&(t+=20),e.questions==3&&(t+=20),e.activedEmail=="T"&&(t+=20),t}var r=e("gallery/jquery/1.7.2/jquery"),i=e("arale/widget/0.9.16/templatable"),s=e("arale/popup/0.9.6/dropdown"),o=e("gallery/handlebars/1.0.0/handlebars"),u=!1,a=window.GLOBAL||{},f={roboturl:a.system.personalportal+"/portal/robot/getRobotData.json?_callback=?"},l=s.extend({Implements:i,templateHelpers:{securityContent:function(){if(this.securityLevel==="LOW")return new o.SafeString('<span class="global-robot-red">低</span>');if(this.securityLevel==="MEDIUM")return new o.SafeString('<span class="global-robot-red">中</span>');if(this.securityLevel==="HIGH")return"高";if(this.securityLevel==="MAX")return"极高"},securityPercent:function(){var e=0;this.isBindedMobile&&(e+=40);if(this.securityLevel==="HIGH"||this.securityLevel==="MAX")e+=60;return(e||"2")+"%"},convenientContent:function(){return this.fpCount>0?"快":new o.SafeString('<span class="global-robot-red">慢</span>')},convenientPercent:function(){return this.fpCount>0?"100%":"2%"},completeContent:function(){var e=c(this);return e<=40?new o.SafeString('<span class="global-robot-red">'+e+"%</span>"):(e||"2")+"%"},completePercent:function(){return c(this)+"%"},robotPart:function(e){var t=e.split("-")[0],n="global-robot-"+e;switch(t){case"head":this.isComplete&&(n+=" global-robot-"+e+"-active");break;case"ear":this.isBindedMobile&&(n+=" global-robot-"+e+"-active");break;case"arm":case"leg":this.fpCount>0&&(n+=" global-robot-"+e+"-active");break;case"body":if(this.securityLevel==="HIGH"||this.securityLevel==="MAX")n+=" global-robot-"+e+"-active";break;case"heart":this.isCertified&&(n+=" global-robot-"+e+"-active")}return n}},model:{loading:!0},initAttrs:function(e){l.superclass.initAttrs.call(this,e),this.model.isLogin||(this.model.loading=!1,u=!0)},show:function(){var e=this;return u||(u=!0,r.ajax(f.roboturl,{dataType:"jsonp"}).success(function(t){if(t.stat!="ok"){l.superclass.show.call(e),u=!1;return}u=!0,r.extend(e.model,{isSuccess:!0},t),e.renderPartial(".global-robot")}).error(function(){u=!1})),l.superclass.show.call(e),this}});n.exports=l});
