define("alipay/xbox/1.0.3/xbox",["$","arale/dialog/1.0.1/dialog","arale/overlay/1.0.1/overlay","arale/position/1.0.0/position","arale/iframe-shim/1.0.1/iframe-shim","arale/widget/1.0.3/widget","arale/base/1.0.1/base","arale/class/1.0.0/class","arale/events/1.0.0/events","arale/overlay/1.0.1/mask","arale/widget/1.0.3/templatable","gallery/handlebars/1.0.0/handlebars","alipay/object-shim/1.0.0/object-shim","./xbox.css"],function(t,e,i){function s(t){var e=t.match(/([^?#]*)(\?[^#]*)?(#.*)?/);return e.shift(),e[1]=(e[1]&&"?"!==e[1]?e[1]+"&":"?")+"_xbox=true",e.join("")}function o(t,e){var i=e>t?.35*(e-t):30;return Math.max(i,30)}function a(){for(var t,e="AP.widget.xBox".split("."),i=window;t=e.shift();)t&&(i[t]||(i[t]={}),i=i[t]);return i}var n,r=t("$"),l=t("arale/dialog/1.0.1/dialog"),h=t("alipay/object-shim/1.0.0/object-shim");t("./xbox.css");var c=l.extend({attrs:{classPrefix:"alipay-xbox",top:"",isOld:!1,align:{getter:function(t){var e=this._syncTop();return t.selfXY=e.selfXY,t.baseXY=e.baseXY,t}}},setup:function(){c.superclass.setup.call(this),h(this),this._setupOld(),this._setupTop(),this._setupLoading()},_setupTop:function(){this.on("complete:show",function(){var t=this;setTimeout(function(){t.element&&t._setPosition()},500)}),this.after("_syncHeight",function(){var t=this.element.css("height");this._tmpHeight!==t&&(this._setPosition(),this._tmpHeight=t)})},_setupOld:function(){this.get("isOld")&&this.set("closeTpl",""),this.after("show",function(){var t=this;if(this.get("isOld")&&"iframe"===this._type){var e=a();e.hide&&(n=e.hide),e.hide=function(){t.hide()}}}),this.before("hide",function(){if(this.get("isOld")){var t=a();t.hide&&(n?(t.hide=n,n=null):delete t.hide)}})},_setupLoading:function(){var t,e,i='<div class="'+this.get("classPrefix")+'-loading"></div>',s=r(i).hide().insertBefore(this.$("[data-role=content]"));this.after("show",function(){"iframe"===this._type&&(s.css("width",0).show(),e=10,t=setInterval(function(){e+=2,80>=e?s.css("width",e+"%"):(clearInterval(t),setInterval(function(){e++,100>=e&&s.css("width",e+"%")},1e3))},150))}),this.on("complete:show",function(){clearInterval(t),s.animate({width:"100%"},400,function(){s.fadeOut(400)})})},_onRenderTop:function(){this.element&&this._setPosition()},_syncTop:function(){var t=this.get("top");if(t)return{selfXY:["50%",0],baseXY:["50%",t]};var e=parseInt(this.element.innerHeight(),10),i=r(window).height();return t=o(e,i),{selfXY:["50%",0],baseXY:["50%",t]}},_fixUrl:function(){var t=c.superclass._fixUrl.call(this);return s(t)},_setupFocus:function(){}});i.exports=c,i.exports._niceTop=o}),define("alipay/xbox/1.0.3/xbox.css",[],function(){seajs.importStyle(".alipay-xbox{background-color:rgba(0,0,0,.5);FILTER:progid:DXImageTransform.Microsoft.Gradient(startColorstr=#88000000, endColorstr=#88000000);padding:6px;-webkit-transition:height .3s ease-in-out .3s;-moz-transition:height .3s ease-in-out .3s;-o-transition:height .3s ease-in-out .3s;-ms-transition:height .3s ease-in-out .3s;transition:height .3s ease-in-out .3s;border:0}:root .alipay-xbox{FILTER:none\\9}.alipay-xbox-content{background:#fff;height:100%;*zoom:1}.alipay-xbox-close{color:#999;cursor:pointer;display:block;font-family:tahoma;font-size:24px;font-weight:700;height:18px;line-height:14px;position:absolute;right:16px;text-decoration:none;top:16px;z-index:10}.alipay-xbox-close:hover{color:#666;text-shadow:0 0 2px #aaa}.alipay-xbox-loading{border-radius:10px;position:absolute;top:-2px;*top:0;top:0\\0;left:0;background:#CBFE1C;height:2px;zoom:1;overflow:hidden}")});
